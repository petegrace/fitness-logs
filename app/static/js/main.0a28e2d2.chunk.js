(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{169:function(e,t,n){e.exports=n(397)},279:function(e,t,n){},396:function(e,t,n){},397:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"loadPlannedExercisesSuccess",function(){return le}),n.d(a,"addPlannedExercise",function(){return oe}),n.d(a,"addPlannedExerciseSuccess",function(){return se}),n.d(a,"updatePlannedExercise",function(){return de}),n.d(a,"updatePlannedExerciseSuccess",function(){return ue}),n.d(a,"deletePlannedExercise",function(){return pe}),n.d(a,"deletePlannedExerciseSuccess",function(){return me});var r={};n.r(r),n.d(r,"loadPlannedActivities",function(){return he}),n.d(r,"loadPlannedActivitiesSuccess",function(){return fe}),n.d(r,"addPlannedActivity",function(){return ye}),n.d(r,"addPlannedActivitySuccess",function(){return Ee}),n.d(r,"updatePlannedActivity",function(){return ve}),n.d(r,"updatePlannedActivitySuccess",function(){return be}),n.d(r,"deletePlannedActivity",function(){return ge}),n.d(r,"deletePlannedActivitySuccess",function(){return _e});var c={};n.r(c),n.d(c,"loadActivityTypes",function(){return De}),n.d(c,"loadActivityTypesSuccess",function(){return Ne});var i={};n.r(i),n.d(i,"loadTrainingPlanTemplates",function(){return xe}),n.d(i,"loadTrainingPlanTemplatesSuccess",function(){return ke}),n.d(i,"copyTrainingPlanTemplate",function(){return Te}),n.d(i,"copyTrainingPlanTemplateSuccess",function(){return Se});var l=n(0),o=n.n(l),s=n(26),d=n.n(s),u=n(9),p=n(11),m=n(164),h=n(401),f=n(8),y=n(15),E=n(18),v=n(16),b=n(17),g=n(4),_=n.n(g),A=(n(279),function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).renderActivityTypeButton=function(e){var t="btn btn-sm ml-1 mr-1 "+e.category_key,a={activity_type:e.activity_type,category_key:e.category_key,recurrence:"once",planned_date:_.a.format(n.props.calendarDay,"YYYY-MM-DD"),repeatOption:"Repeat every "+_.a.format(n.props.calendarDay,"dddd")};return o.a.createElement("button",{key:e.activity_type,className:t,onClick:function(){return n.props.onAdd(a)}},o.a.createElement("i",{className:"fa fa-calendar-plus-o"})," ",e.activity_type,o.a.createElement("br",null),o.a.createElement("small",null,"\xa0"))},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.activityTypes,t=e.map(this.renderActivityTypeButton);return o.a.createElement(o.a.Fragment,null,e.length>0&&o.a.createElement("h3",null,"Add Activities"),t)}}]),t}(l.Component));var D=A=Object(p.b)(function(e){return{activityTypes:e.activityTypes}})(A),N=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).renderExerciseTypeButton=function(e){var t="btn btn-sm ml-1 mr-1 "+(e.category_key?e.category_key:"uncategorised");return o.a.createElement("button",{key:e.id,className:t,onClick:function(){return n.props.onAdd(e.id)}},o.a.createElement("i",{className:"fa fa-calendar-plus-o"})," ",e.exercise_name,o.a.createElement("br",null),o.a.createElement("small",null,"[","reps"===e.measured_by&&e.default_reps+" reps","seconds"===e.measured_by&&e.default_seconds+" seconds","]"))},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props.exerciseTypes.map(this.renderExerciseTypeButton);return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Add Exercises"),o.a.createElement("button",{key:"new",className:"btn btn-sm ml-1 mr-1 btn-secondary new-exercise-type",onClick:function(){return e.props.onAdd(null)}},o.a.createElement("i",{className:"fa fa-calendar-plus-o"})," New Exercise Type",o.a.createElement("br",null),o.a.createElement("small",null,"\xa0")),t)}}]),t}(l.Component);var O=N=Object(p.b)(function(e){return{exerciseTypes:e.exerciseTypes}})(N),P=n(399);function w(e,t){var n=_.a.format(t,"YYYY-MM-DD");return e.filter(function(e){return e.planned_date===n})}function x(e,t){var n=_.a.format(t,"YYYY-MM-DD");return e.filter(function(e){return e.planned_date===n})}var k=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).renderPlannedActivityRow=function(e){var t="badge badge-primary "+e.category_key,a={id:e.id,activity_type:e.activity_type,category_key:e.category_key,description:e.description,planned_distance:e.planned_distance,recurrence:e.recurrence,planned_date:_.a.format(n.props.calendarDay,"YYYY-MM-DD"),repeatOption:"Repeat every "+_.a.format(n.props.calendarDay,"dddd")};return o.a.createElement("tr",{key:e.id},o.a.createElement("td",{className:"name-badge"},o.a.createElement("h5",null,o.a.createElement("span",{className:t},e.activity_type))),o.a.createElement("td",null,e.planned_distance?e.planned_distance+" km":""),o.a.createElement("td",null,e.description),o.a.createElement("td",null,"once"===e.recurrence&&"Once only","weekly"===e.recurrence&&o.a.createElement(o.a.Fragment,null,"Repeats every ",_.a.format(n.props.calendarDay,"dddd"))),o.a.createElement("td",{className:"actions"},o.a.createElement("ul",{className:"nav justify-content-end"},o.a.createElement("li",{className:"nav-item mr-3"},o.a.createElement("a",{href:"#",role:"button",onClick:function(){return n.props.onEdit(a)}},o.a.createElement("i",{className:"fa fa-edit"}))),o.a.createElement(P.a,{as:"li",className:"nav-item"},o.a.createElement(P.a.Toggle,{as:"a",cole:"button",href:"#",bsPrefix:"none"},o.a.createElement("i",{className:"fa fa-trash"})),o.a.createElement(P.a.Menu,{alignRight:"true"},"once"===e.recurrence&&o.a.createElement(P.a.Item,{href:"#",role:"button",onClick:function(){return n.props.onRemove(e.id,"all")}},"Remove from plan"),"weekly"===e.recurrence&&o.a.createElement(o.a.Fragment,null,o.a.createElement(P.a.Item,{href:"#",role:"button",onClick:function(){return n.props.onRemove(e.id,_.a.format(n.props.calendarDay,"YYYY-MM-DD"))}},"Remove for this day"),o.a.createElement(P.a.Item,{href:"#",role:"button",onClick:function(){return n.props.onRemove(e.id,"all")}},"Remove for all weeks")))))))},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=w(this.props.plannedActivities,this.props.calendarDay),t=e.map(this.renderPlannedActivityRow);return o.a.createElement("div",null,e.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Planned Activities"),o.a.createElement("table",{className:"table table-sm table-hover mt-3"},o.a.createElement("tbody",null,t))))}}]),t}(l.Component);var T=k=Object(p.b)(function(e){return{plannedActivities:e.plannedActivities}})(k),S=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).renderPlannedExerciseRow=function(e){var t="badge badge-primary "+e.category_key,a={id:e.id,exercise_name:e.exercise_name,category_name:e.category_name,category_key:e.category_key,planned_sets:e.planned_sets,measured_by:e.measured_by,planned_reps:e.planned_reps,planned_seconds:e.planned_seconds,recurrence:e.recurrence,planned_date:_.a.format(n.props.calendarDay,"YYYY-MM-DD"),repeatOption:"Repeat every "+_.a.format(n.props.calendarDay,"dddd")};return o.a.createElement("tr",{key:e.id},o.a.createElement("td",{className:"name-badge"},o.a.createElement("div",{className:"d-none d-sm-inline"},o.a.createElement("h5",null,o.a.createElement("span",{className:t},e.exercise_name))),o.a.createElement("div",{className:"d-inline d-sm-none"},o.a.createElement("h5",null,o.a.createElement("span",{className:t},e.exercise_name.length<=20?e.exercise_name:e.exercise_name.substring(0,17)+"...")))),o.a.createElement("td",null,e.planned_sets?e.planned_sets+" sets":""),"reps"===e.measured_by&&o.a.createElement("td",null,e.planned_reps?e.planned_reps+" reps":""),"seconds"===e.measured_by&&o.a.createElement("td",null,e.planned_seconds?e.planned_seconds+" secs":""),o.a.createElement("td",null,o.a.createElement("div",{className:"d-none d-sm-inline"},"once"===e.recurrence&&"Once only","weekly"===e.recurrence&&o.a.createElement(o.a.Fragment,null,"Repeats every ",_.a.format(n.props.calendarDay,"dddd"))),o.a.createElement("div",{className:"d-inline d-sm-none"},"once"===e.recurrence&&"Once","weekly"===e.recurrence&&o.a.createElement(o.a.Fragment,null,_.a.format(n.props.calendarDay,"ddd")))),o.a.createElement("td",{className:"actions"},o.a.createElement("ul",{className:"nav justify-content-end"},o.a.createElement("li",{className:"nav-item mr-3"},o.a.createElement("a",{href:"#",role:"button",onClick:function(){return n.props.onEdit(a)}},o.a.createElement("i",{className:"fa fa-edit"}))),o.a.createElement(P.a,{as:"li",className:"nav-item"},o.a.createElement(P.a.Toggle,{as:"a",cole:"button",href:"#",bsPrefix:"none"},o.a.createElement("i",{className:"fa fa-trash"})),o.a.createElement(P.a.Menu,{alignRight:"true"},"once"===e.recurrence&&o.a.createElement(P.a.Item,{href:"#",role:"button",onClick:function(){return n.props.onRemove(e.id,"all")}},"Remove from plan"),"weekly"===e.recurrence&&o.a.createElement(o.a.Fragment,null,o.a.createElement(P.a.Item,{href:"#",role:"button",onClick:function(){return n.props.onRemove(e.id,_.a.format(n.props.calendarDay,"YYYY-MM-DD"))}},"Remove for this day"),o.a.createElement(P.a.Item,{href:"#",role:"button",onClick:function(){return n.props.onRemove(e.id,"all")}},"Remove for all weeks")))))))},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=x(this.props.plannedExercises,this.props.calendarDay),t=[],n=!0,a=!1,r=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var l=c.value;t.push(l.exercises.map(this.renderPlannedExerciseRow))}}catch(s){a=!0,r=s}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return o.a.createElement("div",null,e.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Planned Exercises"),o.a.createElement("table",{className:"table table-sm table-hover mt-3"},o.a.createElement("tbody",null,t))))}}]),t}(l.Component);var C=S=Object(p.b)(function(e){return{plannedExercises:e.plannedExercises}})(S),j=n(400),M=n(398),Y=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.initData;this.props.initialize(e)}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.handleBackClick,a=e.initData,r="badge badge-primary "+a.category_key;return o.a.createElement("form",{onSubmit:t,className:"form"},o.a.createElement("h4",{className:"mt-3 mb-3"},o.a.createElement("small",null,"Activity Type:")," ",o.a.createElement("span",{className:r},a.activity_type)),o.a.createElement("div",{className:"form-group "},o.a.createElement("label",{className:"form-control-label",htmlFor:"recurrence"},"Recurrence"),o.a.createElement(j.a,{component:"select",className:"form-control",id:"recurrence",name:"recurrence"},o.a.createElement("option",{value:"once"},"Once only"),o.a.createElement("option",{value:"weekly"},a.repeatOption))),o.a.createElement("div",{className:"form-group "},o.a.createElement("label",{className:"form-control-label",htmlFor:"description"},"Description"),o.a.createElement(j.a,{component:"input",type:"text",className:"form-control",id:"description",name:"description",placeholder:"(optional)"})),o.a.createElement("div",{className:"form-group "},o.a.createElement("label",{className:"form-control-label",htmlFor:"planned_distance"},"Planned Distance (km)"),o.a.createElement(j.a,{component:"input",type:"number",className:"form-control",id:"planned_distance",name:"planned_distance",placeholder:"(optional)"})),o.a.createElement("button",{type:"submit",className:"btn btn-primary mr-1"},"Save Activity"),o.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:n},"Back"))}}]),t}(l.Component),F=Y=Object(M.a)({form:"plannedActivity"})(Y),R=n(402),I=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).renderCategorySelectOption=function(e){return o.a.createElement("option",{key:e.id,value:e.id},e.category_name)},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.initData;this.props.initialize(e)}},{key:"render",value:function(){var e,t=this.props,n=t.handleSubmit,a=t.handleBackClick,r=t.initData,c="badge badge-primary "+r.category_key;return r.isNewExerciseType&&(e=r.categoryOptions.map(this.renderCategorySelectOption)),o.a.createElement("form",{onSubmit:n,className:"form"},o.a.createElement("h4",{className:"mt-3 mb-3"},r.exercise_name," ",o.a.createElement("span",{className:c},r.category_name)),r.isNewExerciseType&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"form-group "},o.a.createElement(j.a,{component:B,type:"text",id:"exercise_name",name:"exercise_name",label:"Exercise Name"})),o.a.createElement("div",{className:"form-group "},o.a.createElement("label",{className:"form-control-label",htmlFor:"measured_by"},"Measured By"),o.a.createElement(j.a,{component:"select",className:"form-control",id:"measured_by",name:"measured_by"},o.a.createElement("option",{value:"reps"},"Reps"),o.a.createElement("option",{value:"seconds"},"Time (seconds)")))),(!this.props.measuredByValue&&"reps"===r.measured_by||"reps"===this.props.measuredByValue)&&o.a.createElement("div",{className:"form-group "},o.a.createElement("label",{className:"form-control-label",htmlFor:"planned_reps"},"Reps (per Set)"),o.a.createElement(j.a,{component:"input",type:"number",className:"form-control",id:"planned_reps",name:"planned_reps"})),(!this.props.measuredByValue&&"seconds"===r.measured_by||"seconds"===this.props.measuredByValue)&&o.a.createElement("div",{className:"form-group "},o.a.createElement("label",{className:"form-control-label",htmlFor:"planned_seconds"},"Seconds (per Set)"),o.a.createElement(j.a,{component:"input",type:"number",className:"form-control",id:"planned_seconds",name:"planned_seconds"})),o.a.createElement("div",{className:"form-group "},o.a.createElement(j.a,{component:B,type:"number",id:"planned_sets",name:"planned_sets",label:"Planned Sets"})),o.a.createElement("div",{className:"form-group "},o.a.createElement("label",{className:"form-control-label",htmlFor:"recurrence"},"Recurrence"),o.a.createElement(j.a,{component:"select",className:"form-control",id:"recurrence",name:"recurrence"},o.a.createElement("option",{value:"weekly"},r.repeatOption),o.a.createElement("option",{value:"once"},"Once only"))),r.isNewExerciseType&&r.categoryOptions&&r.categoryOptions.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"form-group "},o.a.createElement("label",{className:"form-control-label",htmlFor:"exercise_category_id"},"Category"),o.a.createElement(j.a,{component:"select",className:"form-control",id:"exercise_category_id",name:"exercise_category_id"},e))),o.a.createElement("button",{type:"submit",className:"btn btn-primary mr-1"},"Save Exercise"),o.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:a},"Back"))}}]),t}(l.Component),B=function(e){var t=e.input,n=e.label,a=e.type,r=e.meta,c=r.touched,i=r.error,l=r.warning;return o.a.createElement("div",null,o.a.createElement("label",{className:"form-control-label"},n),o.a.createElement("div",null,o.a.createElement("input",Object.assign({className:"form-control"},t,{type:a})),c&&(i&&o.a.createElement("div",{className:"error mt-1"},i)||l&&o.a.createElement("span",null,l))))};I=Object(M.a)({form:"plannedExercise",validate:function(e){var t={};return Number(e.planned_sets)<=0&&(t.planned_sets="Planned Sets must be at least 1."),t}})(I);var L=Object(R.a)("plannedExercise"),H=I=Object(p.b)(function(e){return{measuredByValue:L(e,"measured_by")}})(I),U="LOAD_PLANNED_ACTIVITIES_SUCCESS",z="DELETE_PLANNED_ACTIVITY_SUCCESS",V="UPDATE_PLANNED_ACTIVITY_SUCCESS",J="ADD_PLANNED_ACTIVITY_SUCCESS",G="LOAD_PLANNED_EXERCISES_SUCCESS",W="DELETE_PLANNED_EXERCISE_SUCCESS",X="UPDATE_PLANNED_EXERCISE_SUCCESS",q="ADD_PLANNED_EXERCISE_SUCCESS",K="LOAD_ACTIVITY_TYPES_SUCCESS",Q="LOAD_EXERCISE_TYPES_SUCCESS",Z="LOAD_EXERCISE_CATEGORIES_SUCCESS",$="LOAD_TRAINING_PLAN_TEMPLATES_SUCCESS",ee="COPY_TRAINING_PLAN_TEMPLATE_SUCCESS",te=n(25),ne=n.n(te),ae=function e(){var t=this;Object(f.a)(this,e),this.getPlannedActivities=function(e,n){var a={method:"GET",headers:{Authorization:t.authHeader}},r=t.endpointOrigin+"/api/planned_activities?startDate="+_.a.format(e,t.dateFormat)+"&endDate="+_.a.format(n,t.dateFormat);return fetch(r,a).then(function(e){if(e.ok)return e.json()}).catch(function(e){return e})},this.postPlannedActivities=function(e){var n={method:"POST",headers:{Authorization:t.authHeader,"Content-Type":"application/json"},body:e,mode:"cors"},a=t.endpointOrigin+"/api/planned_activities";return fetch(a,n).then(function(e){if(e.ok)return e.json()}).catch(function(e){return e})};var n=ne.a.get("accessToken");this.authHeader="Bearer "+n,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin,this.dateFormat="YYYY-MM-DD"},re=function e(){var t=this;Object(f.a)(this,e),this.patchPlannedActivity=function(e,n){var a={method:"PATCH",headers:{Authorization:t.authHeader,"Content-Type":"application/json"},body:n,mode:"cors"},r=t.endpointOrigin+"/api/planned_activity/"+e;return fetch(r,a).then(function(e){if(e.ok)return!0}).catch(function(e){return e})},this.deletePlannedActivity=function(e,n){var a={method:"DELETE",headers:{Authorization:t.authHeader}},r=t.endpointOrigin+"/api/planned_activity/"+e+"?scope="+n;return fetch(r,a).then(function(e){if(e.ok)return!0;throw Error(e.statusText)}).catch(function(e){return e})};var n=ne.a.get("accessToken");this.authHeader="Bearer "+n,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin},ce=function e(){var t=this;Object(f.a)(this,e),this.patchPlannedExercise=function(e,n){var a={method:"PATCH",headers:{Authorization:t.authHeader,"Content-Type":"application/json"},body:n,mode:"cors"},r=t.endpointOrigin+"/api/planned_exercise/"+e;return fetch(r,a).then(function(e){if(e.ok)return!0}).catch(function(e){return e})},this.deletePlannedExercise=function(e,n){var a={method:"DELETE",headers:{Authorization:t.authHeader}},r=t.endpointOrigin+"/api/planned_exercise/"+e+"?scope="+n;return fetch(r,a).then(function(e){if(e.ok)return!0;throw Error(e.statusText)}).catch(function(e){return e})};var n=ne.a.get("accessToken");this.authHeader="Bearer "+n,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin},ie=function e(){var t=this;Object(f.a)(this,e),this.postPlannedExercises=function(e){var n={method:"POST",headers:{Authorization:t.authHeader,"Content-Type":"application/json"},body:e,mode:"cors"},a=t.endpointOrigin+"/api/planned_exercises";return fetch(a,n).then(function(e){if(e.ok)return e.json()}).catch(function(e){return e})};var n=ne.a.get("accessToken");this.authHeader="Bearer "+n,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin};function le(e){return{type:G,plannedExercises:e.planned_exercises}}function oe(e){return function(t){return(new ie).postPlannedExercises(e).then(function(e){t(se(e))}).catch(function(e){throw e})}}function se(e){return{type:q,addedId:e.id}}function de(e,t){return function(n){return(new ce).patchPlannedExercise(e,t).then(function(t){n(ue(e))}).catch(function(e){throw e})}}function ue(e){return{type:X,updatedId:e}}function pe(e,t){return function(n){return(new ce).deletePlannedExercise(e,t).then(function(t){n(me(e))}).catch(function(e){throw e})}}function me(e,t){return{type:W,deletedId:e,scope:t}}function he(e,t){return function(n){return(new ae).getPlannedActivities(e,t).then(function(e){e&&(n(fe(e)),n(le(e)))}).catch(function(e){throw e})}}function fe(e){return{type:U,plannedActivities:e.planned_activities}}function ye(e){return function(t){return(new ae).postPlannedActivities(e).then(function(e){t(Ee(e))}).catch(function(e){throw e})}}function Ee(e){return{type:J,addedId:e.id}}function ve(e,t){return function(n){return(new re).patchPlannedActivity(e,t).then(function(t){n(be(e))}).catch(function(e){throw e})}}function be(e){return{type:V,updatedId:e}}function ge(e,t){return function(n){return(new re).deletePlannedActivity(e,t).then(function(a){n(_e(e,t))}).catch(function(e){throw e})}}function _e(e,t){return{type:z,deletedId:e,scope:t}}var Ae=function e(){var t=this;Object(f.a)(this,e),this.getActivityTypes=function(){var e={method:"GET",headers:{Authorization:t.authHeader}},n=t.endpointOrigin+"/api/activity_types";return fetch(n,e).then(function(e){if(e.ok)return e.json()}).catch(function(e){return e})};var n=ne.a.get("accessToken");this.authHeader="Bearer "+n,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin};function De(){return function(e){return(new Ae).getActivityTypes().then(function(t){t&&(e(Ne(t)),e(function(e){return{type:Q,exerciseTypes:e.exercise_types}}(t)),e(function(e){return{type:Z,exerciseCategories:e.exercise_categories}}(t)))}).catch(function(e){throw e})}}function Ne(e){return{type:K,activityTypes:e.activity_types}}var Oe=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(E.a)(this,Object(v.a)(t).call(this,e))).togglePlannedActivityForm=function(){n.setState({showCalendarDayMain:!n.state.showCalendarDayMain,showPlannedActivityForm:!n.state.showPlannedActivityForm,showPlannedExerciseForm:!1})},n.togglePlannedExerciseForm=function(){n.setState({showCalendarDayMain:!n.state.showCalendarDayMain,showPlannedExerciseForm:!n.state.showPlannedExerciseForm,showPlannedActivityForm:!1})},n.handleAddPlannedActivity=function(e){n.setState({plannedActivityFormInitData:e}),n.togglePlannedActivityForm()},n.handleEditPlannedActivity=function(e){n.setState({plannedActivityFormInitData:e}),n.togglePlannedActivityForm()},n.handleSavePlannedActivity=function(e){var t=JSON.stringify({activity_type:e.activity_type,planned_date:e.planned_date,recurrence:e.recurrence,description:e.description,planned_distance:e.planned_distance});e.id?n.props.plannedActivityActions.updatePlannedActivity(e.id,t).then(function(e){n.props.refresh(n.props.calendarDay)}):n.props.plannedActivityActions.addPlannedActivity(t).then(function(e){n.props.refresh(n.props.calendarDay)}),n.togglePlannedActivityForm()},n.handleRemovePlannedActivity=function(e,t){n.props.plannedActivityActions.deletePlannedActivity(e,t).then(function(e){n.props.refresh(n.props.calendarDay)})},n.handleAddPlannedExercise=function(e){var t=_.a.format(n.props.calendarDay,"YYYY-MM-DD");if(e){var a,r,c=n.props.plannedExercises.filter(function(e){return e.planned_date===t}),i=!0,l=!1,o=void 0;try{for(var s,d=c[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var u=s.value,p=!0,m=!1,h=void 0;try{for(var f,y=u.exercises[Symbol.iterator]();!(p=(f=y.next()).done);p=!0){var E=f.value;E.exercise_type_id===e&&(r=E.id,a=JSON.stringify({recurrence:E.recurrence,planned_date:t,planned_sets:E.planned_sets+1,planned_reps:E.planned_reps,planned_seconds:E.planned_seconds}))}}catch(g){m=!0,h=g}finally{try{p||null==y.return||y.return()}finally{if(m)throw h}}}}catch(g){l=!0,o=g}finally{try{i||null==d.return||d.return()}finally{if(l)throw o}}if(r)n.props.plannedExerciseActions.updatePlannedExercise(r,a).then(function(e){n.props.refresh(n.props.calendarDay)});else{var v=n.props.exerciseTypes.filter(function(t){return t.id===e})[0];a=JSON.stringify({exercise_type_id:e,recurrence:"weekly",planned_date:t,planned_reps:v.default_reps,planned_seconds:v.default_seconds}),n.props.plannedExerciseActions.addPlannedExercise(a).then(function(e){n.props.refresh(n.props.calendarDay)})}}else{var b={isNewExerciseType:!0,measured_by:"reps",planned_sets:1,recurrence:"weekly",planned_date:_.a.format(n.props.calendarDay,"YYYY-MM-DD"),repeatOption:"Repeat every "+_.a.format(n.props.calendarDay,"dddd"),categoryOptions:n.props.exerciseCategories};n.setState({plannedExerciseFormInitData:b}),n.togglePlannedExerciseForm()}},n.handleEditPlannedExercise=function(e){n.setState({plannedExerciseFormInitData:e}),n.togglePlannedExerciseForm()},n.handleSavePlannedExercise=function(e){if(e.id){var t=JSON.stringify({planned_date:e.planned_date,recurrence:e.recurrence,planned_sets:e.planned_sets,planned_reps:e.planned_reps,planned_seconds:e.planned_seconds});n.props.plannedExerciseActions.updatePlannedExercise(e.id,t).then(function(e){n.props.refresh(n.props.calendarDay)})}else{var a=JSON.stringify({exercise_name:e.exercise_name,measured_by:e.measured_by,exercise_category_id:e.exercise_category_id,planned_sets:e.planned_sets,planned_reps:e.planned_reps,planned_seconds:e.planned_seconds,recurrence:e.recurrence,planned_date:_.a.format(n.props.calendarDay,"YYYY-MM-DD")});n.props.plannedExerciseActions.addPlannedExercise(a).then(function(e){n.props.refresh(n.props.calendarDay),n.props.activityTypeActions.loadActivityTypes()})}n.togglePlannedExerciseForm()},n.handleRemovePlannedExercise=function(e,t){n.props.plannedExerciseActions.deletePlannedExercise(e,t).then(function(e){n.props.refresh(n.props.calendarDay)})},n.state={showCalendarDayMain:!0,showPlannedActivityForm:!1,showPlannedExerciseForm:!1,isFutureDate:e.calendarDay>=_.a.startOfDay(new Date),plannedActivities:e.plannedActivities},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"modal-back-drop"},o.a.createElement("div",{className:"modal-wrapper"},o.a.createElement("div",{className:"calendar-modal-header"},o.a.createElement("div",{className:"d-none d-sm-inline"},o.a.createElement("h4",null,_.a.format(this.props.calendarDay,"dddd DD MMMM YYYY"))),o.a.createElement("div",{className:"d-inline d-sm-none"},o.a.createElement("h4",null,_.a.format(this.props.calendarDay,"ddd DD MMM YYYY"))),o.a.createElement("span",{className:"close-modal-btn",onClick:this.props.close},o.a.createElement("i",{className:"fa fa-window-close"}))),o.a.createElement("div",{className:"calendar-modal-body"},o.a.createElement("div",null,this.state.showCalendarDayMain&&this.state.isFutureDate&&o.a.createElement(o.a.Fragment,null,o.a.createElement(T,{calendarDay:this.props.calendarDay,onEdit:this.handleEditPlannedActivity,onRemove:this.handleRemovePlannedActivity}),o.a.createElement(C,{calendarDay:this.props.calendarDay,onEdit:this.handleEditPlannedExercise,onRemove:this.handleRemovePlannedExercise}),o.a.createElement(D,{calendarDay:this.props.calendarDay,onAdd:this.handleAddPlannedActivity}),o.a.createElement(O,{calendarDay:this.props.calendarDay,onAdd:this.handleAddPlannedExercise})),this.state.showPlannedActivityForm&&o.a.createElement(F,{initData:this.state.plannedActivityFormInitData,onSubmit:this.handleSavePlannedActivity,handleBackClick:this.togglePlannedActivityForm}),this.state.showPlannedExerciseForm&&o.a.createElement(H,{initData:this.state.plannedExerciseFormInitData,onSubmit:this.handleSavePlannedExercise,handleBackClick:this.togglePlannedExerciseForm}),!this.state.isFutureDate&&o.a.createElement("p",null,"Please select a date in the future to plan your training.")))))}}]),t}(l.Component);var Pe=Object(p.b)(function(e){return{plannedExercises:e.plannedExercises,exerciseTypes:e.exerciseTypes,exerciseCategories:e.exerciseCategories}},function(e){return{plannedActivityActions:Object(u.b)(r,e),plannedExerciseActions:Object(u.b)(a,e),activityTypeActions:Object(u.b)(c,e)}})(Oe),we=function e(){var t=this;Object(f.a)(this,e),this.getTrainingPlanTemplates=function(){var e=t.endpointOrigin+"/api/training_plan_templates";return fetch(e,{method:"GET"}).then(function(e){if(e.ok)return e.json()}).catch(function(e){return e})},this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin};function xe(){return function(e){return(new we).getTrainingPlanTemplates().then(function(t){t&&e(ke(t))}).catch(function(e){throw e})}}function ke(e){return{type:$,trainingPlanTemplates:e.training_plan_templates}}function Te(e){var t=JSON.stringify({template_id:e});return function(e){return(new ie).postPlannedExercises(t).then(function(t){e(Se(t))}).catch(function(e){throw e})}}function Se(e){return{type:ee,message:e.message}}var Ce=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleAddToTrainingPlan=function(e){n.props.trainingPlanTemplateActions.copyTrainingPlanTemplate(e).then(function(e){n.props.refresh(n.props.calendarDay),n.props.activityTypeActions.loadActivityTypes()})},n.renderTemplateDetails=function(e){return o.a.createElement("div",{key:e.id},o.a.createElement("hr",null),o.a.createElement("div",{className:"alert alert-info"},o.a.createElement("h6",null,e.name," [",o.a.createElement("a",{href:"#",onClick:function(){return n.handleAddToTrainingPlan(e.id)}},"Add to Training Plan"),"]"),o.a.createElement("p",null,e.description," ",o.a.createElement("a",{href:e.link_url,target:"_blank",rel:"noopener noreferrer"},e.link_text))))},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.trainingPlanTemplateActions.loadTrainingPlanTemplates()}},{key:"render",value:function(){var e=this.props.trainingPlanTemplates.map(this.renderTemplateDetails);return o.a.createElement("div",{className:"card mt-4"},o.a.createElement("div",{className:"card-header"},o.a.createElement("h4",null,"Get started using a template")),o.a.createElement("div",{className:"card-body"},o.a.createElement("p",null,"If you're looking for somewhere to start with creating your personalised training plan, try one of these templates to populate some initial exercises, and then adapt as required. Let us know via ",o.a.createElement("a",{href:"mailto:feedback@trainingticks.com"},"feedback@trainingticks.com")," if there's a training plan you've come across that you'd like to be available as a template."),o.a.createElement("p",null,o.a.createElement("i",null,"Please note that Training Ticks has no association with any of the websites or authors referenced below. We are sharing them as useful resources that will hopefully help your training.")),e))}}]),t}(l.Component);var je=Ce=Object(p.b)(function(e){return{trainingPlanTemplates:e.trainingPlanTemplates}},function(e){return{trainingPlanTemplateActions:Object(u.b)(i,e),activityTypeActions:Object(u.b)(c,e)}})(Ce),Me=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(E.a)(this,Object(v.a)(t).call(this,e))).refreshPlannedActivities=function(e){var t=_.a.startOfWeek(_.a.startOfMonth(e),{weekStartsOn:1}),a=_.a.endOfWeek(_.a.endOfMonth(e),{weekStartsOn:1});n.props.actions.loadPlannedActivities(t,a)},n.renderHeader=function(){return o.a.createElement("div",{className:"header row flex-middle"},o.a.createElement("div",{className:"col col-start"},o.a.createElement("div",{className:"icon",onClick:n.prevMonth},"chevron_left")),o.a.createElement("div",{className:"col col-center"},o.a.createElement("span",null,_.a.format(n.state.currentMonth,"MMMM YYYY"))),o.a.createElement("div",{className:"col col-end",onClick:n.nextMonth},o.a.createElement("div",{className:"icon"},"chevron_right")))},n.renderDayNames=function(){for(var e=[],t=_.a.startOfWeek(n.state.currentMonth,{weekStartsOn:1}),a=0;a<7;a++)e.push(o.a.createElement("div",{className:"col col-center",key:a},o.a.createElement("div",{className:"d-none d-md-block"},_.a.format(_.a.addDays(t,a),"dddd")),o.a.createElement("div",{className:"d-block d-md-none"},_.a.format(_.a.addDays(t,a),"ddd"))));return o.a.createElement("div",{className:"days row"},e)},n.renderPlannedActivityBadge=function(e){var t="badge badge-primary "+e.category_key;return o.a.createElement("div",{key:e.id,className:"d-inline"},o.a.createElement("div",{className:"d-none d-md-inline"},o.a.createElement("span",{className:t},e.activity_type)),o.a.createElement("div",{className:"d-inline d-md-none "},o.a.createElement("span",{className:t},e.activity_type[0])))},n.renderPlannedExerciseCategoryBadge=function(e){var t="badge badge-primary "+e.category_key;return o.a.createElement("div",{key:e.category_key+e.planned_date,className:"d-inline"},o.a.createElement("div",{className:"d-none d-md-inline"},o.a.createElement("span",{className:t},e.category_name)),o.a.createElement("div",{className:"d-inline d-md-none "},o.a.createElement("span",{className:t},e.category_name[0])))},n.renderCells=function(){for(var e=n.state,t=e.currentMonth,a=e.selectedDate,r=_.a.startOfMonth(t),c=_.a.endOfMonth(r),i=_.a.startOfWeek(r,{weekStartsOn:1}),l=_.a.endOfWeek(c,{weekStartsOn:1}),s=[],d=[],u=i,p="";u<=l;){for(var m=function(e){p=_.a.format(u,"D");var t=u,c=w(n.props.plannedActivities,u),i=c.map(n.renderPlannedActivityBadge),l=x(n.props.plannedExercises,u).map(n.renderPlannedExerciseCategoryBadge);d.push(o.a.createElement("div",{className:"col cell\n                            ".concat(_.a.isSameMonth(u,r)?"":"disabled","\n                            ").concat(_.a.isSameDay(u,a)?"selected":"","\n                        "),key:u,onClick:function(){return n.onDateClick(_.a.parse(t),c)}},o.a.createElement("span",{className:"number"},p),o.a.createElement("span",{className:"bg"},p),o.a.createElement("div",{className:"cell-content"},o.a.createElement("div",null,i),o.a.createElement("div",null,l)))),u=_.a.addDays(u,1)},h=0;h<7;h++)m();s.push(o.a.createElement("div",{className:"row",key:u},d)),d=[]}return o.a.createElement("div",{className:"body"},s)},n.onDateClick=function(e,t){n.setState({selectedDate:e,showCalendarDayModal:!0,selectedDatePlannedActivities:t}),document.body.classList.toggle("noscroll")},n.handleCloseCalendarDayModal=function(){n.setState({showCalendarDayModal:!1}),document.body.classList.toggle("noscroll"),n.refreshPlannedActivities(n.state.currentMonth)},n.nextMonth=function(){var e=_.a.addMonths(n.state.currentMonth,1);n.setState({currentMonth:e}),n.refreshPlannedActivities(e)},n.prevMonth=function(){var e=_.a.subMonths(n.state.currentMonth,1);n.setState({currentMonth:e}),n.refreshPlannedActivities(e)},n.state={currentMonth:new Date,today:new Date,selectedDate:null,showCalendarDayModal:!1},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.refreshPlannedActivities(this.state.currentMonth)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"calendar"},this.renderHeader(),this.renderDayNames(),this.renderCells()),this.state.showCalendarDayModal&&o.a.createElement(Pe,{className:"modal",calendarDay:this.state.selectedDate,refresh:this.refreshPlannedActivities,close:this.handleCloseCalendarDayModal}),o.a.createElement(je,{calendarDay:this.state.selectedDate,refresh:this.refreshPlannedActivities}))}}]),t}(l.Component);var Ye=Me=Object(p.b)(function(e){return{plannedActivities:e.plannedActivities,plannedExercises:e.plannedExercises}},function(e){return{actions:Object(u.b)(r,e)}})(Me),Fe=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.activityTypeActions.loadActivityTypes()}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Training Plan"),o.a.createElement("div",{className:"alert alert-info"},"Use our brand new training calendar to plan your activities and exercises. You can schedule activities to do just once or on a recurring weekly basis, and they'll show up on your home page when it's time to do them."),o.a.createElement(Ye,null))}}]),t}(l.Component);var Re=Fe=Object(p.b)(function(e){return{}},function(e){return{activityTypeActions:Object(u.b)(c,e)}})(Fe),Ie={plannedActivities:[]};n(396);var Be=Object(u.c)({form:h.a,plannedActivities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie.plannedActivities,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return t.plannedActivities;default:return e}},plannedExercises:function(e,t){if(void 0===e)return[];switch(t.type){case G:return t.plannedExercises;default:return e}},activityTypes:function(e,t){if(void 0===e)return[];switch(t.type){case K:return t.activityTypes;default:return e}},exerciseTypes:function(e,t){if(void 0===e)return[];switch(t.type){case Q:return t.exerciseTypes;default:return e}},exerciseCategories:function(e,t){if(void 0===e)return[];switch(t.type){case Z:return t.exerciseCategories;default:return e}},trainingPlanTemplates:function(e,t){if(void 0===e)return[];switch(t.type){case $:return t.trainingPlanTemplates;default:return e}}}),Le=Object(u.d)(Be,Object(u.a)(m.a));d.a.render(o.a.createElement(p.a,{store:Le},o.a.createElement(Re,null)),document.getElementById("container"))}},[[169,1,2]]]);
//# sourceMappingURL=main.0a28e2d2.chunk.js.map