(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{172:function(e,t,a){e.exports=a.p+"static/media/race-day-bg.6a192603.png"},173:function(e,t,a){e.exports=a(401)},285:function(e,t,a){},400:function(e,t,a){},401:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"loadPlannedRacesSuccess",function(){return $e}),a.d(n,"addPlannedRace",function(){return et}),a.d(n,"addPlannedRaceSuccess",function(){return tt}),a.d(n,"updatePlannedRace",function(){return at}),a.d(n,"updatePlannedRaceSuccess",function(){return nt}),a.d(n,"deletePlannedRace",function(){return rt}),a.d(n,"deletePlannedRaceSuccess",function(){return ct});var r={};a.r(r),a.d(r,"loadPlannedExercisesSuccess",function(){return ot}),a.d(r,"addPlannedExercise",function(){return st}),a.d(r,"addPlannedExerciseSuccess",function(){return dt}),a.d(r,"updatePlannedExercise",function(){return ut}),a.d(r,"updatePlannedExerciseSuccess",function(){return mt}),a.d(r,"deletePlannedExercise",function(){return pt}),a.d(r,"deletePlannedExerciseSuccess",function(){return ht});var c={};a.r(c),a.d(c,"loadPlannedActivities",function(){return ft}),a.d(c,"loadPlannedActivitiesSuccess",function(){return yt}),a.d(c,"addPlannedActivity",function(){return Et}),a.d(c,"addPlannedActivitySuccess",function(){return vt}),a.d(c,"updatePlannedActivity",function(){return _t}),a.d(c,"updatePlannedActivitySuccess",function(){return bt}),a.d(c,"deletePlannedActivity",function(){return gt}),a.d(c,"deletePlannedActivitySuccess",function(){return Nt});var l={};a.r(l),a.d(l,"loadActivityTypes",function(){return wt}),a.d(l,"loadActivityTypesSuccess",function(){return At});var i={};a.r(i),a.d(i,"loadTrainingPlanGeneratorInputs",function(){return Tt}),a.d(i,"loadTrainingPlanGeneratorInputsSuccess",function(){return jt}),a.d(i,"addPlannedActivities",function(){return Ct}),a.d(i,"addPlannedActivitiesSuccess",function(){return St});var o={};a.r(o),a.d(o,"loadTrainingPlanTemplates",function(){return Ft}),a.d(o,"loadTrainingPlanTemplatesSuccess",function(){return Yt}),a.d(o,"copyTrainingPlanTemplate",function(){return Lt}),a.d(o,"copyTrainingPlanTemplateSuccess",function(){return Gt});var s={};a.r(s),a.d(s,"loadCompletedActivities",function(){return Ht}),a.d(s,"loadCompletedActivitiesSuccess",function(){return Vt});var d={};a.r(d),a.d(d,"loadUserInfo",function(){return $t}),a.d(d,"loadUserInfoSuccess",function(){return ea}),a.d(d,"updateUserInfo",function(){return ta}),a.d(d,"updateUserInfoSuccess",function(){return aa});var u=a(0),m=a.n(u),p=a(28),h=a.n(p),f=a(11),y=a(10),E=a(168),v=a(405),_=a(1),b=a(6),g=a(13),N=a(15),O=a(14),w=a(16),A=a(5),P=a.n(A),k=(a(285),function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).renderActivityTypeButton=function(e){var t="btn btn-sm ml-1 mr-1 "+e.category_key,n={activity_type:e.activity_type,category_key:e.category_key,planning_period:a.props.planningPeriod,recurrence:"once",planned_date:P.a.format(a.props.calendarDay,"YYYY-MM-DD"),repeatOption:"Repeat every "+("day"===a.props.planningPeriod?P.a.format(a.props.calendarDay,"dddd"):"week"),distance_uom_preference:a.props.user.distance_uom_preference};return m.a.createElement("button",{key:e.activity_type,className:t,onClick:function(){return a.props.onAdd(n)}},m.a.createElement("i",{className:"fa fa-calendar-plus-o"})," ",e.activity_type,m.a.createElement("br",null),m.a.createElement("small",null,"\xa0"))},a.renderPlannedRaceButton=function(){var e={planned_date:P.a.format(a.props.calendarDay,"YYYY-MM-DD"),race_type:"Run",distance_uom_preference:a.props.user.distance_uom_preference};return m.a.createElement("button",{key:"race",className:"btn btn-sm ml-1 mr-1 btn-secondary new-exercise-type",onClick:function(){return a.props.onAddRace(e)}},m.a.createElement("i",{className:"fa fa-flag-checkered"})," Planned Race",m.a.createElement("br",null),m.a.createElement("small",null,"\xa0"))},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.activityTypes,t=e.map(this.renderActivityTypeButton),a=this.renderPlannedRaceButton();return m.a.createElement(m.a.Fragment,null,e.length>0&&m.a.createElement("h3",null,"Add Activities"),t,"day"===this.props.planningPeriod&&a)}}]),t}(u.Component));var D=k=Object(y.b)(function(e){return{activityTypes:e.activityTypes,user:e.user}})(k),T=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).renderExerciseTypeButton=function(e){var t="btn btn-sm ml-1 mr-1 "+(e.category_key?e.category_key:"uncategorised");return m.a.createElement("button",{key:e.id,className:t,onClick:function(){return a.props.onAdd(e.id)}},m.a.createElement("i",{className:"fa fa-calendar-plus-o"})," ",e.exercise_name,m.a.createElement("br",null),m.a.createElement("small",null,"[","reps"===e.measured_by&&e.default_reps+" reps","seconds"===e.measured_by&&e.default_seconds+" seconds","]"))},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.exerciseTypeIdsToExclude?this.props.exerciseTypeIdsToExclude:[],a=this.props.exerciseTypes.filter(function(e){var a=e.id;return!t.includes(a)}).map(this.renderExerciseTypeButton);return m.a.createElement(m.a.Fragment,null,m.a.createElement("button",{key:"new",className:"btn btn-sm ml-1 mr-1 btn-secondary new-exercise-type",onClick:function(){return e.props.onAdd(null)}},m.a.createElement("i",{className:"fa fa-calendar-plus-o"})," New Exercise Type",m.a.createElement("br",null),m.a.createElement("small",null,"\xa0")),a)}}]),t}(u.Component);var j=T=Object(y.b)(function(e){return{exerciseTypes:e.exerciseTypes}})(T);function C(e,t,a){var n=P.a.format(t,"YYYY-MM-DD");return e.filter(function(e){return e.planned_date===n&&e.planning_period===a})}function S(e,t){var a=P.a.format(t,"YYYY-MM-DD");return e.filter(function(e){return e.planned_date===a})}function R(e,t,a){var n=P.a.format(t,"YYYY-MM-DD");return e.filter(function(e){return e.planned_date===n&&e.planning_period===a})}function x(e,t){var a=P.a.format(t,"YYYY-MM-DD");return e.filter(function(e){return e.activity_date===a})}function M(e,t){var a=P.a.format(t,"YYYY-MM-DD");return e.filter(function(e){return e.exercise_date===a})}var I=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).renderCompletedActivitySummary=function(e){var t="card "+e.category_key+"_border_only mt-2",a="card-header "+e.category_key,n="/activity_analysis/"+e.id;return m.a.createElement("div",{className:"activity-summary",key:e.id},m.a.createElement("div",{className:t},m.a.createElement("div",{className:a},m.a.createElement("h6",{className:"m-0 p-0"},m.a.createElement("a",{href:n},e.name,"\xa0",e.is_race&&m.a.createElement("i",{className:"fa fa-flag-checkered"})))),m.a.createElement("div",{className:"card-body"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("table",null,m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",null,m.a.createElement("small",null,"When:")),m.a.createElement("td",null,e.activity_date)),m.a.createElement("tr",null,m.a.createElement("td",null,m.a.createElement("small",null,"Distance:")),m.a.createElement("td",null,e.distance_formatted)),m.a.createElement("tr",null,m.a.createElement("td",null,m.a.createElement("small",null,"Moving Time:")),m.a.createElement("td",null,e.moving_time))))),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("table",null,m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",null,m.a.createElement("small",null,"Avg. Pace:")),m.a.createElement("td",null,e.average_pace_formatted)),m.a.createElement("tr",null,m.a.createElement("td",null,m.a.createElement("small",null,"Avg. Cadence:")),m.a.createElement("td",null,e.average_cadence)),m.a.createElement("tr",null,m.a.createElement("td",null,m.a.createElement("small",null,"Median Cadence:")),m.a.createElement("td",null,e.median_cadence))))),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("table",null,m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",null,m.a.createElement("small",null,"Avg. Heart Rate:")),m.a.createElement("td",null,e.average_heartrate)),m.a.createElement("tr",null,m.a.createElement("td",null,m.a.createElement("small",null,"Elevation Gain:")),m.a.createElement("td",null,e.total_elevation_gain_formatted)),m.a.createElement("tr",null,m.a.createElement("td",null,m.a.createElement("small",null,"Avg. Climbing Gradient:")),m.a.createElement("td",null,e.average_climbing_gradient_formatted)))))),m.a.createElement("div",{className:"row mt-3"},m.a.createElement("div",{className:"col-12"},e.description&&m.a.createElement("p",null,m.a.createElement("small",null,"Description:")," ",e.description),m.a.createElement("p",{className:"mb-1"},m.a.createElement("a",{href:n},"Analyse Activity")," |\xa0",m.a.createElement("a",{href:e.strava_url},"View on Strava")))))))},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=x(this.props.completedActivities,this.props.calendarDay),t=e.map(this.renderCompletedActivitySummary);return m.a.createElement("div",null,e.length>0&&m.a.createElement(m.a.Fragment,null,m.a.createElement("h3",null,"Completed Activities"),t))}}]),t}(u.Component);var F=I=Object(y.b)(function(e){return{completedActivities:e.completedActivities}})(I),Y=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).renderCompletedExerciseRow=function(e){var t="badge badge-primary "+e.category_key;return m.a.createElement("tr",{key:e.id},m.a.createElement("td",{className:"name-badge"},m.a.createElement("div",{className:"d-none d-sm-inline"},m.a.createElement("h5",null,m.a.createElement("span",{className:t},e.exercise_name))),m.a.createElement("div",{className:"d-inline d-sm-none"},m.a.createElement("h5",null,m.a.createElement("span",{className:t},e.exercise_name.length<=30?e.exercise_name:e.exercise_name.substring(0,27)+"...")))),m.a.createElement("td",null,e.exercise_time),"reps"===e.measured_by&&m.a.createElement("td",null,e.reps?e.reps+" reps":""),"seconds"===e.measured_by&&m.a.createElement("td",null,e.seconds?e.seconds+" secs":""))},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=M(this.props.completedExercises,this.props.calendarDay),t=[],a=!0,n=!1,r=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var i=c.value;t.push(i.exercises.map(this.renderCompletedExerciseRow))}}catch(o){n=!0,r=o}finally{try{a||null==l.return||l.return()}finally{if(n)throw r}}return m.a.createElement("div",null,e.length>0&&m.a.createElement(m.a.Fragment,null,m.a.createElement("h3",null,"Completed Exercises"),m.a.createElement("table",{className:"table table-sm table-hover mt-3"},m.a.createElement("tbody",null,t))))}}]),t}(u.Component);var L=Y=Object(y.b)(function(e){return{completedExercises:e.completedExercises}})(Y),G=a(403),U=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).renderPlannedRaceSummary=function(e){var t="card "+e.category_key+"_border_only mt-2",n="card-header "+e.category_key,r={id:e.id,name:e.name,planned_date:P.a.format(a.props.calendarDay,"YYYY-MM-DD"),race_type:e.race_type,distance:e.distance,entry_status:e.entry_status,race_website_url:e.race_website_url,notes:e.notes,distance_uom_preference:a.props.user.distance_uom_preference};return m.a.createElement("div",{className:"activity-summary",key:e.id},m.a.createElement("div",{className:t},m.a.createElement("div",{className:n},m.a.createElement("h6",{className:"m-0 p-0"},e.name,"\xa0",m.a.createElement("i",{className:"fa fa-flag-checkered"}))),m.a.createElement("div",{className:"card-body"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-sm-6"},m.a.createElement("p",null,"Race Type: ",e.race_type),e.distance&&m.a.createElement("p",null,"Distance: ",e.distance," ",a.props.user.distance_uom_preference),e.entry_status&&m.a.createElement("p",null,"Entry Status: ",e.entry_status)),m.a.createElement("div",{className:"col-sm-6"},e.notes&&m.a.createElement("p",null,"Notes:",m.a.createElement("br",null),e.notes))),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-12"},e.race_website_url&&m.a.createElement("p",null,"Race Website: ",e.race_website_url),m.a.createElement("ul",{className:"nav"},m.a.createElement("li",{className:"nav-item mr-3"},m.a.createElement("a",{href:"#edit",role:"button",onClick:function(){return a.props.onEdit(r)}},m.a.createElement("i",{className:"fa fa-edit"})," Edit")),m.a.createElement(G.a,{as:"li",className:"nav-item"},m.a.createElement(G.a.Toggle,{as:"a",cole:"button",href:"#",bsPrefix:"none"},m.a.createElement("i",{className:"fa fa-trash"})," Remove"),m.a.createElement(G.a.Menu,null,m.a.createElement(G.a.Item,{href:"#",role:"button",onClick:function(){return a.props.onRemove(e.id,"all")}},"Confirm Remove")))))))))},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=S(this.props.plannedRaces,this.props.calendarDay),t=e.map(this.renderPlannedRaceSummary);return m.a.createElement("div",null,e.length>0&&m.a.createElement(m.a.Fragment,null,m.a.createElement("h3",null,"Planned Races"),t))}}]),t}(u.Component);var B=U=Object(y.b)(function(e){return{plannedRaces:e.plannedRaces,user:e.user}})(U),W=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).renderPlannedActivityRow=function(e){var t="badge badge-primary "+e.category_key,n={id:e.id,activity_type:e.activity_type,activity_subtype:e.activity_subtype,category_key:e.category_key,description:e.description,planned_distance:e.planned_distance,recurrence:e.recurrence,planned_date:P.a.format(a.props.calendarDay,"YYYY-MM-DD"),repeatOption:"Repeat every "+("day"===e.planning_period?P.a.format(a.props.calendarDay,"dddd"):"week"),distance_uom_preference:a.props.user.distance_uom_preference};return m.a.createElement("tr",{key:e.id},m.a.createElement("td",{className:"name-badge"},m.a.createElement("h5",null,m.a.createElement("span",{className:t},e.activity_subtype))),m.a.createElement("td",null,e.planned_distance?e.planned_distance+" "+a.props.user.distance_uom_preference:""),m.a.createElement("td",null,e.description),m.a.createElement("td",null,"once"===e.recurrence&&"Once only","weekly"===e.recurrence&&m.a.createElement(m.a.Fragment,null,"Repeats every ","day"===a.props.planningPeriod?P.a.format(a.props.calendarDay,"dddd"):"week")),m.a.createElement("td",{className:"actions"},m.a.createElement("ul",{className:"nav justify-content-end"},m.a.createElement("li",{className:"nav-item mr-3"},m.a.createElement("a",{href:"#edit",role:"button",onClick:function(){return a.props.onEdit(n)}},m.a.createElement("i",{className:"fa fa-edit"}))),m.a.createElement(G.a,{as:"li",className:"nav-item"},m.a.createElement(G.a.Toggle,{as:"a",cole:"button",href:"#",bsPrefix:"none"},m.a.createElement("i",{className:"fa fa-trash"})),m.a.createElement(G.a.Menu,{alignRight:"true"},"once"===e.recurrence&&m.a.createElement(G.a.Item,{href:"#",role:"button",onClick:function(){return a.props.onRemove(e.id,"all")}},"Remove from plan"),"weekly"===e.recurrence&&m.a.createElement(m.a.Fragment,null,m.a.createElement(G.a.Item,{href:"#",role:"button",onClick:function(){return a.props.onRemove(e.id,P.a.format(a.props.calendarDay,"YYYY-MM-DD"))}},"Remove for this ",a.props.planningPeriod),m.a.createElement(G.a.Item,{href:"#",role:"button",onClick:function(){return a.props.onRemove(e.id,"all")}},"Remove for all weeks")))))))},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=C(this.props.plannedActivities,this.props.calendarDay,this.props.planningPeriod),t=e.map(this.renderPlannedActivityRow);return m.a.createElement("div",null,e.length>0&&m.a.createElement(m.a.Fragment,null,m.a.createElement("h3",null,"Planned Activities"),m.a.createElement("table",{className:"table table-sm table-hover mt-3"},m.a.createElement("tbody",null,t))))}}]),t}(u.Component);var H=W=Object(y.b)(function(e){return{plannedActivities:e.plannedActivities,user:e.user}})(W),V=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).renderPlannedExerciseRow=function(e){var t="badge badge-primary "+e.category_key,n={id:e.id,exercise_name:e.exercise_name,category_name:e.category_name,category_key:e.category_key,planned_sets:e.planned_sets,measured_by:e.measured_by,planned_reps:e.planned_reps,planned_seconds:e.planned_seconds,recurrence:e.recurrence,planned_date:P.a.format(a.props.calendarDay,"YYYY-MM-DD"),repeatOption:"Repeat every "+("day"===e.planning_period?P.a.format(a.props.calendarDay,"dddd"):"week")};return m.a.createElement("tr",{key:e.id},m.a.createElement("td",{className:"name-badge"},m.a.createElement("div",{className:"d-none d-sm-inline"},m.a.createElement("h5",null,m.a.createElement("span",{className:t},e.exercise_name))),m.a.createElement("div",{className:"d-inline d-sm-none"},m.a.createElement("h5",null,m.a.createElement("span",{className:t},e.exercise_name.length<=20?e.exercise_name:e.exercise_name.substring(0,17)+"...")))),m.a.createElement("td",null,e.planned_sets?e.planned_sets+" sets":""),"reps"===e.measured_by&&m.a.createElement("td",null,e.planned_reps?e.planned_reps+" reps":""),"seconds"===e.measured_by&&m.a.createElement("td",null,e.planned_seconds?e.planned_seconds+" secs":""),m.a.createElement("td",null,m.a.createElement("div",{className:"d-none d-sm-inline"},"once"===e.recurrence&&"Once only","weekly"===e.recurrence&&m.a.createElement(m.a.Fragment,null,"Repeats every ","day"===a.props.planningPeriod?P.a.format(a.props.calendarDay,"dddd"):"week")),m.a.createElement("div",{className:"d-inline d-sm-none"},"once"===e.recurrence&&"Once","weekly"===e.recurrence&&"Weekly")),m.a.createElement("td",{className:"actions"},m.a.createElement("ul",{className:"nav justify-content-end"},m.a.createElement("li",{className:"nav-item mr-3"},m.a.createElement("a",{href:"#edit",role:"button",onClick:function(){return a.props.onEdit(n)}},m.a.createElement("i",{className:"fa fa-edit"}))),m.a.createElement(G.a,{as:"li",className:"nav-item"},m.a.createElement(G.a.Toggle,{as:"a",cole:"button",href:"#",bsPrefix:"none"},m.a.createElement("i",{className:"fa fa-trash"})),m.a.createElement(G.a.Menu,{alignRight:"true"},"once"===e.recurrence&&m.a.createElement(G.a.Item,{href:"#",role:"button",onClick:function(){return a.props.onRemove(e.id,"all")}},"Remove from plan"),"weekly"===e.recurrence&&m.a.createElement(m.a.Fragment,null,m.a.createElement(G.a.Item,{href:"#",role:"button",onClick:function(){return a.props.onRemove(e.id,P.a.format(a.props.calendarDay,"YYYY-MM-DD"))}},"Remove for this ",a.props.planningPeriod),m.a.createElement(G.a.Item,{href:"#",role:"button",onClick:function(){return a.props.onRemove(e.id,"all")}},"Remove for all weeks")))))))},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=R(this.props.plannedExercises,this.props.calendarDay,this.props.planningPeriod),t=[],a=!0,n=!1,r=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var i=c.value;t.push(i.exercises.map(this.renderPlannedExerciseRow))}}catch(o){n=!0,r=o}finally{try{a||null==l.return||l.return()}finally{if(n)throw r}}return m.a.createElement("div",null,e.length>0&&m.a.createElement(m.a.Fragment,null,m.a.createElement("h3",null,"Planned Exercises"),m.a.createElement("table",{className:"table table-sm table-hover mt-3"},m.a.createElement("tbody",null,t))))}}]),t}(u.Component);var z=V=Object(y.b)(function(e){return{plannedExercises:e.plannedExercises}})(V),J=a(404),X=a(402),q=function(e){function t(){return Object(b.a)(this,t),Object(N.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.initData;this.props.initialize(e)}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.handleBackClick,n=e.initData,r="badge badge-primary "+n.category_key;return m.a.createElement("form",{onSubmit:t,className:"form"},m.a.createElement("h4",{className:"mt-3 mb-3"},m.a.createElement("small",null,"Activity Type:")," ",m.a.createElement("span",{className:r},n.activity_type)),"Run"===n.activity_type&&m.a.createElement("div",{className:"form-group "},m.a.createElement("label",{className:"form-control-label",htmlFor:"activity_subtype"},"Run Type"),m.a.createElement(J.a,{component:"select",className:"form-control",id:"activity_subtype",name:"activity_subtype"},m.a.createElement("option",{value:""},"(optional)"),m.a.createElement("option",{value:"Long Run"},"Long Run"),m.a.createElement("option",{value:"Easy / Social Run"},"Easy / Social Run"),m.a.createElement("option",{value:"Intervals / Fartlek"},"Intervals / Fartlek"),m.a.createElement("option",{value:"Tempo Run"},"Tempo Run"),m.a.createElement("option",{value:"Hilly Run"},"Hilly Run"),m.a.createElement("option",{value:"Trail Run"},"Trail Run"))),m.a.createElement("div",{className:"form-group "},m.a.createElement("label",{className:"form-control-label",htmlFor:"recurrence"},"Recurrence"),m.a.createElement(J.a,{component:"select",className:"form-control",id:"recurrence",name:"recurrence"},m.a.createElement("option",{value:"once"},"Once only"),m.a.createElement("option",{value:"weekly"},n.repeatOption))),m.a.createElement("div",{className:"form-group "},m.a.createElement("label",{className:"form-control-label",htmlFor:"description"},"Description"),m.a.createElement(J.a,{component:"input",type:"text",className:"form-control",id:"description",name:"description",placeholder:"(optional)"})),m.a.createElement("div",{className:"form-group "},m.a.createElement("label",{className:"form-control-label",htmlFor:"planned_distance"},"Planned Distance (",n.distance_uom_preference,")"),m.a.createElement(J.a,{component:"input",type:"number",className:"form-control",id:"planned_distance",name:"planned_distance",placeholder:"(optional)"})),m.a.createElement("button",{type:"submit",className:"btn btn-primary mr-1"},"Save Activity"),m.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:a},"Back"))}}]),t}(u.Component),K=q=Object(X.a)({form:"plannedActivity"})(q),Q=function(e){function t(){return Object(b.a)(this,t),Object(N.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.initData;this.props.initialize(e)}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.handleBackClick,n=e.initData;return m.a.createElement("form",{onSubmit:t,className:"form"},m.a.createElement("h4",{className:"mt-3 mb-3"},"New Planned Race"),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"form-control-label",htmlFor:"name"},"Name of Race"),m.a.createElement(J.a,{component:"input",type:"text",className:"form-control",id:"name",name:"name",required:!0})),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"form-control-label",htmlFor:"race_type"},"Race Type"),m.a.createElement(J.a,{component:"select",className:"form-control",id:"race_type",name:"race_type"},m.a.createElement("option",{value:"Run"},"Run"),m.a.createElement("option",{value:"Ride"},"Ride"),m.a.createElement("option",{value:"Swim"},"Swim"),m.a.createElement("option",{value:"Triathlon"},"Triathlon"),m.a.createElement("option",{value:"Duathlon"},"Duathlon"))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"form-control-label",htmlFor:"distance"},"Distance (",n.distance_uom_preference,")"),m.a.createElement(J.a,{component:"input",type:"number",className:"form-control",id:"distance",name:"distance",placeholder:"(optional)"})),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"form-control-label",htmlFor:"entry_status"},"Entry Status"),m.a.createElement(J.a,{component:"select",className:"form-control",id:"entry_status",name:"entry_status"},m.a.createElement("option",{value:""},"(optional)"),m.a.createElement("option",{value:"Entered"},"Entered"),m.a.createElement("option",{value:"Probable"},"Probable"),m.a.createElement("option",{value:"Possible"},"Possible"))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"form-control-label",htmlFor:"race_website_url"},"Race Website URL"),m.a.createElement(J.a,{component:"input",type:"text",className:"form-control",id:"race_website_url",name:"race_website_url",placeholder:"(optional)"})),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"form-control-label",htmlFor:"notes"},"Notes"),m.a.createElement(J.a,{component:"input",type:"text",className:"form-control",id:"notes",name:"notes",placeholder:"(optional)"})),m.a.createElement("button",{type:"submit",className:"btn btn-primary mr-1"},"Save Race"),m.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:a},"Back"))}}]),t}(u.Component),Z=Q=Object(X.a)({form:"plannedRace"})(Q),$=a(406),ee=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).renderCategorySelectOption=function(e){return m.a.createElement("option",{key:e.id,value:e.id},e.category_name)},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.initData;this.props.initialize(e)}},{key:"render",value:function(){var e,t=this.props,a=t.handleSubmit,n=t.handleBackClick,r=t.initData,c="badge badge-primary "+r.category_key;return r.isNewExerciseType&&(e=r.categoryOptions.map(this.renderCategorySelectOption)),m.a.createElement("form",{onSubmit:a,className:"form"},m.a.createElement("h4",{className:"mt-3 mb-3"},r.exercise_name," ",m.a.createElement("span",{className:c},r.category_name)),r.isNewExerciseType&&m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"form-group "},m.a.createElement(J.a,{component:te,type:"text",id:"exercise_name",name:"exercise_name",label:"Exercise Name"})),m.a.createElement("div",{className:"form-group "},m.a.createElement("label",{className:"form-control-label",htmlFor:"measured_by"},"Measured By"),m.a.createElement(J.a,{component:"select",className:"form-control",id:"measured_by",name:"measured_by"},m.a.createElement("option",{value:"reps"},"Reps"),m.a.createElement("option",{value:"seconds"},"Time (seconds)")))),(!this.props.measuredByValue&&"reps"===r.measured_by||"reps"===this.props.measuredByValue)&&m.a.createElement("div",{className:"form-group "},m.a.createElement("label",{className:"form-control-label",htmlFor:"planned_reps"},"Reps (per Set)"),m.a.createElement(J.a,{component:"input",type:"number",className:"form-control",id:"planned_reps",name:"planned_reps"})),(!this.props.measuredByValue&&"seconds"===r.measured_by||"seconds"===this.props.measuredByValue)&&m.a.createElement("div",{className:"form-group "},m.a.createElement("label",{className:"form-control-label",htmlFor:"planned_seconds"},"Seconds (per Set)"),m.a.createElement(J.a,{component:"input",type:"number",className:"form-control",id:"planned_seconds",name:"planned_seconds"})),m.a.createElement("div",{className:"form-group "},m.a.createElement(J.a,{component:te,type:"number",id:"planned_sets",name:"planned_sets",label:"Planned Sets"})),m.a.createElement("div",{className:"form-group "},m.a.createElement("label",{className:"form-control-label",htmlFor:"recurrence"},"Recurrence"),m.a.createElement(J.a,{component:"select",className:"form-control",id:"recurrence",name:"recurrence"},m.a.createElement("option",{value:"weekly"},r.repeatOption),m.a.createElement("option",{value:"once"},"Once only"))),r.isNewExerciseType&&r.categoryOptions&&r.categoryOptions.length>0&&m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"form-group "},m.a.createElement("label",{className:"form-control-label",htmlFor:"exercise_category_id"},"Category"),m.a.createElement(J.a,{component:"select",className:"form-control",id:"exercise_category_id",name:"exercise_category_id"},e))),m.a.createElement("button",{type:"submit",className:"btn btn-primary mr-1"},"Save Exercise"),m.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:n},"Back"))}}]),t}(u.Component),te=function(e){var t=e.input,a=e.label,n=e.type,r=e.meta,c=r.touched,l=r.error,i=r.warning;return m.a.createElement("div",null,m.a.createElement("label",{className:"form-control-label"},a),m.a.createElement("div",null,m.a.createElement("input",Object.assign({className:"form-control"},t,{type:n})),c&&(l&&m.a.createElement("div",{className:"error mt-1"},l)||i&&m.a.createElement("span",null,i))))};ee=Object(X.a)({form:"plannedExercise",validate:function(e){var t={};return Number(e.planned_sets)<=0&&(t.planned_sets="Planned Sets must be at least 1."),t}})(ee);var ae=Object($.a)("plannedExercise"),ne=ee=Object(y.b)(function(e){return{measuredByValue:ae(e,"measured_by")}})(ee),re=a(3),ce="LOAD_PLANNED_ACTIVITIES",le="LOAD_PLANNED_ACTIVITIES_SUCCESS",ie="DELETE_PLANNED_ACTIVITY",oe="DELETE_PLANNED_ACTIVITY_SUCCESS",se="UPDATE_PLANNED_ACTIVITY",de="UPDATE_PLANNED_ACTIVITY_SUCCESS",ue="ADD_PLANNED_ACTIVITY",me="ADD_PLANNED_ACTIVITY_SUCCESS",pe="LOAD_PLANNED_RACES_SUCCESS",he="DELETE_PLANNED_RACE",fe="DELETE_PLANNED_RACE_SUCCESS",ye="UPDATE_PLANNED_RACE",Ee="UPDATE_PLANNED_RACE_SUCCESS",ve="ADD_PLANNED_RACE",_e="ADD_PLANNED_RACE_SUCCESS",be="LOAD_PLANNED_EXERCISES_SUCCESS",ge="DELETE_PLANNED_EXERCISE",Ne="DELETE_PLANNED_EXERCISE_SUCCESS",Oe="UPDATE_PLANNED_EXERCISE",we="UPDATE_PLANNED_EXERCISE_SUCCESS",Ae="ADD_PLANNED_EXERCISE",Pe="ADD_PLANNED_EXERCISE_SUCCESS",ke="LOAD_COMPLETED_ACTIVITIES",De="LOAD_COMPLETED_ACTIVITIES_SUCCESS",Te="LOAD_COMPLETED_EXERCISES_SUCCESS",je="LOAD_ACTIVITY_TYPES",Ce="LOAD_ACTIVITY_TYPES_SUCCESS",Se="LOAD_EXERCISE_TYPES_SUCCESS",Re="LOAD_EXERCISE_CATEGORIES_SUCCESS",xe="LOAD_TRAINING_PLAN_GENERATOR_INPUTS",Me="LOAD_TRAINING_PLAN_GENERATOR_INPUTS_SUCCESS",Ie="ADD_PLANNED_ACTIVITIES",Fe="ADD_PLANNED_ACTIVITIES_SUCCESS",Ye="LOAD_TRAINING_PLAN_TEMPLATES_SUCCESS",Le="COPY_TRAINING_PLAN_TEMPLATE",Ge="COPY_TRAINING_PLAN_TEMPLATE_SUCCESS",Ue="LOAD_USER_INFO",Be="LOAD_USER_INFO_SUCCESS",We="UPDATE_USER_INFO",He="UPDATE_USER_INFO_SUCCESS",Ve="SHOW_ALERT",ze="ERROR_ENCOUNTERED",Je=a(21),Xe=a.n(Je),qe=function e(){var t=this;Object(b.a)(this,e),this.getPlannedActivities=function(e,a){var n={method:"GET",headers:{Authorization:t.authHeader}},r=t.endpointOrigin+"/api/planned_activities?startDate="+P.a.format(e,t.dateFormat)+"&endDate="+P.a.format(a,t.dateFormat);return fetch(r,n).then(function(e){if(e.ok)return e.json()}).catch(function(e){return e})},this.postPlannedActivities=function(e){var a={method:"POST",headers:{Authorization:t.authHeader,"Content-Type":"application/json"},body:e,mode:"cors"},n=t.endpointOrigin+"/api/planned_activities";return fetch(n,a).then(function(e){if(e.ok)return e.json()}).catch(function(e){return e})};var a=Xe.a.get("accessToken");this.authHeader="Bearer "+a,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin,this.dateFormat="YYYY-MM-DD"},Ke=function e(){var t=this;Object(b.a)(this,e),this.patchPlannedActivity=function(e,a){var n={method:"PATCH",headers:{Authorization:t.authHeader,"Content-Type":"application/json"},body:a,mode:"cors"},r=t.endpointOrigin+"/api/planned_activity/"+e;return fetch(r,n).then(function(e){if(e.ok)return!0}).catch(function(e){return e})},this.deletePlannedActivity=function(e,a){var n={method:"DELETE",headers:{Authorization:t.authHeader}},r=t.endpointOrigin+"/api/planned_activity/"+e+"?scope="+a;return fetch(r,n).then(function(e){if(e.ok)return!0;throw Error(e.statusText)}).catch(function(e){return e})};var a=Xe.a.get("accessToken");this.authHeader="Bearer "+a,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin},Qe=function e(){var t=this;Object(b.a)(this,e),this.postPlannedRaces=function(e){var a={method:"POST",headers:{Authorization:t.authHeader,"Content-Type":"application/json"},body:e,mode:"cors"},n=t.endpointOrigin+"/api/planned_races";return fetch(n,a).then(function(e){if(e.ok)return e.json()}).catch(function(e){return e})};var a=Xe.a.get("accessToken");this.authHeader="Bearer "+a,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin},Ze=function e(){var t=this;Object(b.a)(this,e),this.patchPlannedRace=function(e,a){var n={method:"PATCH",headers:{Authorization:t.authHeader,"Content-Type":"application/json"},body:a,mode:"cors"},r=t.endpointOrigin+"/api/planned_race/"+e;return fetch(r,n).then(function(e){if(e.ok)return!0}).catch(function(e){return e})},this.deletePlannedRace=function(e){var a={method:"DELETE",headers:{Authorization:t.authHeader}},n=t.endpointOrigin+"/api/planned_race/"+e;return fetch(n,a).then(function(e){if(e.ok)return!0;throw Error(e.statusText)}).catch(function(e){return e})};var a=Xe.a.get("accessToken");this.authHeader="Bearer "+a,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin};function $e(e){return{type:pe,plannedRaces:e.planned_races}}function et(e){return function(t){return t(Object(re.a)({type:ve},_.d,_.b)),(new Qe).postPlannedRaces(e).then(function(e){t(tt(e))}).catch(function(e){throw t(Object(re.a)({type:ze},_.d,_.c)),e})}}function tt(e){var t;return t={type:_e},Object(re.a)(t,_.d,_.c),Object(re.a)(t,"addedId",e.id),t}function at(e,t){return function(a){return a(Object(re.a)({type:ye},_.d,_.b)),(new Ze).patchPlannedRace(e,t).then(function(t){a(nt(e))}).catch(function(e){throw a(Object(re.a)({type:ze},_.d,_.c)),e})}}function nt(e){var t;return t={type:Ee},Object(re.a)(t,_.d,_.c),Object(re.a)(t,"updatedId",e),t}function rt(e){return function(t){return t(Object(re.a)({type:he},_.d,_.b)),(new Ze).deletePlannedRace(e).then(function(a){t(ct(e))}).catch(function(e){throw t(Object(re.a)({type:ze},_.d,_.c)),e})}}function ct(e){var t;return t={type:fe},Object(re.a)(t,_.d,_.c),Object(re.a)(t,"deletedId",e),t}var lt=function e(){var t=this;Object(b.a)(this,e),this.patchPlannedExercise=function(e,a){var n={method:"PATCH",headers:{Authorization:t.authHeader,"Content-Type":"application/json"},body:a,mode:"cors"},r=t.endpointOrigin+"/api/planned_exercise/"+e;return fetch(r,n).then(function(e){if(e.ok)return!0}).catch(function(e){return e})},this.deletePlannedExercise=function(e,a){var n={method:"DELETE",headers:{Authorization:t.authHeader}},r=t.endpointOrigin+"/api/planned_exercise/"+e+"?scope="+a;return fetch(r,n).then(function(e){if(e.ok)return!0;throw Error(e.statusText)}).catch(function(e){return e})};var a=Xe.a.get("accessToken");this.authHeader="Bearer "+a,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin},it=function e(){var t=this;Object(b.a)(this,e),this.postPlannedExercises=function(e){var a={method:"POST",headers:{Authorization:t.authHeader,"Content-Type":"application/json"},body:e,mode:"cors"},n=t.endpointOrigin+"/api/planned_exercises";return fetch(n,a).then(function(e){if(e.ok)return e.json()}).catch(function(e){return e})};var a=Xe.a.get("accessToken");this.authHeader="Bearer "+a,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin};function ot(e){return{type:be,plannedExercises:e.planned_exercises}}function st(e){return function(t){return t(Object(re.a)({type:Ae},_.d,_.b)),(new it).postPlannedExercises(e).then(function(e){t(dt(e))}).catch(function(e){throw t(Object(re.a)({type:ze},_.d,_.c)),e})}}function dt(e){var t;return t={type:Pe},Object(re.a)(t,_.d,_.c),Object(re.a)(t,"addedId",e.id),t}function ut(e,t){return function(a){return a(Object(re.a)({type:Oe},_.d,_.b)),(new lt).patchPlannedExercise(e,t).then(function(t){a(mt(e))}).catch(function(e){throw a(Object(re.a)({type:ze},_.d,_.c)),e})}}function mt(e){var t;return t={type:we},Object(re.a)(t,_.d,_.c),Object(re.a)(t,"updatedId",e),t}function pt(e,t){return function(a){return a(Object(re.a)({type:ge},_.d,_.b)),(new lt).deletePlannedExercise(e,t).then(function(t){a(ht(e))}).catch(function(e){throw a(Object(re.a)({type:ze},_.d,_.c)),e})}}function ht(e,t){var a;return a={type:Ne},Object(re.a)(a,_.d,_.c),Object(re.a)(a,"deletedId",e),Object(re.a)(a,"scope",t),a}function ft(e,t){return function(a){return a(Object(re.a)({type:ce},_.d,_.b)),(new qe).getPlannedActivities(e,t).then(function(e){e&&(a(yt(e)),a($e(e)),a(ot(e)))}).catch(function(e){throw a(Object(re.a)({type:ze},_.d,_.c)),e})}}function yt(e){var t;return t={type:le},Object(re.a)(t,_.d,_.c),Object(re.a)(t,"plannedActivities",e.planned_activities),t}function Et(e){return function(t){return t(Object(re.a)({type:ue},_.d,_.b)),(new qe).postPlannedActivities(e).then(function(e){t(vt(e))}).catch(function(e){throw t(Object(re.a)({type:ze},_.d,_.c)),e})}}function vt(e){var t;return t={type:me},Object(re.a)(t,_.d,_.c),Object(re.a)(t,"addedId",e.id),t}function _t(e,t){return function(a){return a(Object(re.a)({type:se},_.d,_.b)),(new Ke).patchPlannedActivity(e,t).then(function(t){a(bt(e))}).catch(function(e){throw a(Object(re.a)({type:ze},_.d,_.c)),e})}}function bt(e){var t;return t={type:de},Object(re.a)(t,_.d,_.c),Object(re.a)(t,"updatedId",e),t}function gt(e,t){return function(a){return a(Object(re.a)({type:ie},_.d,_.b)),(new Ke).deletePlannedActivity(e,t).then(function(n){a(Nt(e,t))}).catch(function(e){throw a(Object(re.a)({type:ze},_.d,_.c)),e})}}function Nt(e,t){var a;return a={type:oe},Object(re.a)(a,_.d,_.c),Object(re.a)(a,"deletedId",e),Object(re.a)(a,"scope",t),a}var Ot=function e(){var t=this;Object(b.a)(this,e),this.getActivityTypes=function(){var e={method:"GET",headers:{Authorization:t.authHeader}},a=t.endpointOrigin+"/api/activity_types";return fetch(a,e).then(function(e){if(e.ok)return e.json()}).catch(function(e){return e})};var a=Xe.a.get("accessToken");this.authHeader="Bearer "+a,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin};function wt(){return function(e){return e(Object(re.a)({type:je},_.d,_.b)),(new Ot).getActivityTypes().then(function(t){t&&(e(At(t)),e(function(e){return{type:Se,exerciseTypes:e.exercise_types}}(t)),e(function(e){return{type:Re,exerciseCategories:e.exercise_categories}}(t)))}).catch(function(t){throw e(Object(re.a)({type:ze},_.d,_.c)),t})}}function At(e){var t;return t={type:Ce},Object(re.a)(t,_.d,_.c),Object(re.a)(t,"activityTypes",e.activity_types),t}var Pt=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(N.a)(this,Object(O.a)(t).call(this,e))).togglePlannedActivityForm=function(){a.setState({showCalendarDayMain:!a.state.showCalendarDayMain,showPlannedActivityForm:!a.state.showPlannedActivityForm,showPlannedRaceForm:!1,showPlannedExerciseForm:!1})},a.togglePlannedRaceForm=function(){a.setState({showCalendarDayMain:!a.state.showCalendarDayMain,showPlannedRaceForm:!a.state.showPlannedRaceForm,showPlannedActivityForm:!1,showPlannedExerciseForm:!1})},a.togglePlannedExerciseForm=function(){a.setState({showCalendarDayMain:!a.state.showCalendarDayMain,showPlannedExerciseForm:!a.state.showPlannedExerciseForm,showPlannedActivityForm:!1,showPlannedRaceForm:!1})},a.handleAddPlannedActivity=function(e){a.setState({plannedActivityFormInitData:e}),a.togglePlannedActivityForm()},a.handleEditPlannedActivity=function(e){a.setState({plannedActivityFormInitData:e}),a.togglePlannedActivityForm()},a.handleSavePlannedActivity=function(e){console.log(e);var t=JSON.stringify({activity_type:e.activity_type,activity_subtype:e.activity_subtype,planned_date:e.planned_date,planning_period:e.planning_period,recurrence:e.recurrence,description:e.description,planned_distance:e.planned_distance});e.id?a.props.plannedActivityActions.updatePlannedActivity(e.id,t).then(function(e){a.props.refresh(a.props.calendarDay)}):a.props.plannedActivityActions.addPlannedActivity(t).then(function(e){a.props.refresh(a.props.calendarDay)}),a.togglePlannedActivityForm()},a.handleRemovePlannedActivity=function(e,t){a.props.plannedActivityActions.deletePlannedActivity(e,t).then(function(e){a.props.refresh(a.props.calendarDay)})},a.handleAddPlannedRace=function(e){a.setState({plannedRaceFormInitData:e}),a.togglePlannedRaceForm()},a.handleEditPlannedRace=function(e){a.setState({plannedRaceFormInitData:e}),a.togglePlannedRaceForm()},a.handleSavePlannedRace=function(e){var t=JSON.stringify({name:e.name,planned_date:e.planned_date,race_type:e.race_type,distance:e.distance,entry_status:e.entry_status,race_website_url:e.race_website_url,notes:e.notes});console.log(t),e.id?a.props.plannedRaceActions.updatePlannedRace(e.id,t).then(function(e){a.props.refresh(a.props.calendarDay)}):a.props.plannedRaceActions.addPlannedRace(t).then(function(e){a.props.refresh(a.props.calendarDay)}),a.togglePlannedRaceForm()},a.handleRemovePlannedRace=function(e){a.props.plannedRaceActions.deletePlannedRace(e).then(function(e){a.props.refresh(a.props.calendarDay)})},a.handleAddPlannedExercise=function(e){var t=P.a.format(a.props.calendarDay,"YYYY-MM-DD"),n=a.props.selectionType;if(e){var r,c,l=a.props.plannedExercises.filter(function(e){return e.planned_date===t&&e.planning_period===n}),i=!0,o=!1,s=void 0;try{for(var d,u=l[Symbol.iterator]();!(i=(d=u.next()).done);i=!0){var m=d.value,p=!0,h=!1,f=void 0;try{for(var y,E=m.exercises[Symbol.iterator]();!(p=(y=E.next()).done);p=!0){var v=y.value;v.exercise_type_id===e&&(c=v.id,r=JSON.stringify({planning_period:n,recurrence:v.recurrence,planned_date:t,planned_sets:v.planned_sets+1,planned_reps:v.planned_reps,planned_seconds:v.planned_seconds}))}}catch(g){h=!0,f=g}finally{try{p||null==E.return||E.return()}finally{if(h)throw f}}}}catch(g){o=!0,s=g}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}if(c)a.props.plannedExerciseActions.updatePlannedExercise(c,r).then(function(e){a.props.refresh(a.props.calendarDay)});else{var _=a.props.exerciseTypes.filter(function(t){return t.id===e})[0];r=JSON.stringify({exercise_type_id:e,planning_period:n,recurrence:"weekly",planned_date:t,planned_reps:_.default_reps,planned_seconds:_.default_seconds}),console.log(r),a.props.plannedExerciseActions.addPlannedExercise(r).then(function(e){a.props.refresh(a.props.calendarDay)})}}else{var b={isNewExerciseType:!0,measured_by:"reps",planned_sets:1,planning_period:n,recurrence:"weekly",planned_date:P.a.format(a.props.calendarDay,"YYYY-MM-DD"),repeatOption:"Repeat every "+("day"===n?P.a.format(a.props.calendarDay,"dddd"):"week"),categoryOptions:a.props.exerciseCategories,exercise_category_id:a.props.exerciseCategories.length>0?a.props.exerciseCategories[0].id:null};a.setState({plannedExerciseFormInitData:b}),a.togglePlannedExerciseForm()}},a.handleEditPlannedExercise=function(e){a.setState({plannedExerciseFormInitData:e}),a.togglePlannedExerciseForm()},a.handleSavePlannedExercise=function(e){if(e.id){var t=JSON.stringify({planned_date:e.planned_date,planning_period:e.planning_period,recurrence:e.recurrence,planned_sets:e.planned_sets,planned_reps:e.planned_reps,planned_seconds:e.planned_seconds});a.props.plannedExerciseActions.updatePlannedExercise(e.id,t).then(function(e){a.props.refresh(a.props.calendarDay)})}else{var n=JSON.stringify({exercise_name:e.exercise_name,measured_by:e.measured_by,exercise_category_id:e.exercise_category_id,planned_sets:e.planned_sets,planned_reps:e.planned_reps,planned_seconds:e.planned_seconds,planning_period:e.planning_period,recurrence:e.recurrence,planned_date:P.a.format(a.props.calendarDay,"YYYY-MM-DD")});a.props.plannedExerciseActions.addPlannedExercise(n).then(function(e){a.props.refresh(a.props.calendarDay),a.props.activityTypeActions.loadActivityTypes()})}a.togglePlannedExerciseForm()},a.handleRemovePlannedExercise=function(e,t){a.props.plannedExerciseActions.deletePlannedExercise(e,t).then(function(e){a.props.refresh(a.props.calendarDay)})},a.state={showCalendarDayMain:!0,showPlannedActivityForm:!1,showPlannedRaceForm:!1,showPlannedExerciseForm:!1,isFutureDate:e.calendarDay>=P.a.startOfDay(new Date),plannedActivities:e.plannedActivities},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"modal-back-drop"},m.a.createElement("div",{className:"modal-wrapper"},m.a.createElement("div",{className:"calendar-modal-header"},m.a.createElement("div",{className:"d-none d-sm-inline"},m.a.createElement("h4",null,"week"===this.props.selectionType&&"Week of ",P.a.format(this.props.calendarDay,"dddd DD MMMM YYYY"))),m.a.createElement("div",{className:"d-inline d-sm-none"},m.a.createElement("h4",null,"week"===this.props.selectionType&&"w/c ",P.a.format(this.props.calendarDay,"ddd DD MMM YYYY"))),m.a.createElement("span",{className:"close-modal-btn",onClick:this.props.close},m.a.createElement("i",{className:"fa fa-window-close"}))),m.a.createElement("div",{className:"calendar-modal-body"},m.a.createElement("div",null,"week"===this.props.selectionType&&m.a.createElement("div",{className:"alert alert-info text-left"},"These are activities and exercises that you can do on any day during the week. To add for a specific day click on that day in the calendar instead."),this.state.showCalendarDayMain&&m.a.createElement(m.a.Fragment,null,"day"===this.props.selectionType&&m.a.createElement(m.a.Fragment,null,m.a.createElement(F,{calendarDay:this.props.calendarDay}),m.a.createElement(B,{calendarDay:this.props.calendarDay,onEdit:this.handleEditPlannedRace,onRemove:this.handleRemovePlannedRace}),m.a.createElement(L,{calendarDay:this.props.calendarDay})),m.a.createElement(H,{planningPeriod:this.props.selectionType,calendarDay:this.props.calendarDay,onEdit:this.handleEditPlannedActivity,onRemove:this.handleRemovePlannedActivity}),m.a.createElement(z,{planningPeriod:this.props.selectionType,calendarDay:this.props.calendarDay,onEdit:this.handleEditPlannedExercise,onRemove:this.handleRemovePlannedExercise}),(this.state.isFutureDate||"week"===this.props.selectionType)&&m.a.createElement(m.a.Fragment,null,m.a.createElement(D,{planningPeriod:this.props.selectionType,calendarDay:this.props.calendarDay,onAdd:this.handleAddPlannedActivity,onAddRace:this.handleAddPlannedRace}),m.a.createElement("h3",null,"Add Exercises"),m.a.createElement(j,{calendarDay:this.props.calendarDay,onAdd:this.handleAddPlannedExercise}))),this.state.showPlannedActivityForm&&m.a.createElement(K,{initData:this.state.plannedActivityFormInitData,onSubmit:this.handleSavePlannedActivity,handleBackClick:this.togglePlannedActivityForm}),this.state.showPlannedRaceForm&&m.a.createElement(Z,{initData:this.state.plannedRaceFormInitData,onSubmit:this.handleSavePlannedRace,handleBackClick:this.togglePlannedRaceForm}),this.state.showPlannedExerciseForm&&m.a.createElement(ne,{initData:this.state.plannedExerciseFormInitData,onSubmit:this.handleSavePlannedExercise,handleBackClick:this.togglePlannedExerciseForm})))))}}]),t}(u.Component);var kt=Object(y.b)(function(e){return{plannedExercises:e.plannedExercises,exerciseTypes:e.exerciseTypes,exerciseCategories:e.exerciseCategories}},function(e){return{plannedActivityActions:Object(f.b)(c,e),plannedRaceActions:Object(f.b)(n,e),plannedExerciseActions:Object(f.b)(r,e),activityTypeActions:Object(f.b)(l,e)}})(Pt);var Dt=function e(){var t=this;Object(b.a)(this,e),this.getTrainingPlanGenerator=function(e,a){var n={method:"GET",headers:{Authorization:t.authHeader}},r=t.endpointOrigin+"/api/training_plan_generator?targetRaceDistance="+e+"&targetRaceDate="+a;return fetch(r,n).then(function(e){if(e.ok)return e.json()}).catch(function(e){throw e})};var a=Xe.a.get("accessToken");this.authHeader="Bearer "+a,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin};function Tt(e,t){return function(a){return a(Object(re.a)({type:xe},_.d,_.b)),(new Dt).getTrainingPlanGenerator(e,t).then(function(e){e&&a(jt(e))}).catch(function(e){throw a(Object(re.a)({type:ze},_.d,_.c)),e})}}function jt(e){var t;return t={type:Me},Object(re.a)(t,_.d,_.c),Object(re.a)(t,"trainingPlanGeneratorInputs",e.training_plan_generator_inputs),t}function Ct(e){return function(t){return t(Object(re.a)({type:Ie},_.d,_.b)),(new qe).postPlannedActivities(e).then(function(e){t(St(e,t))}).catch(function(e){throw t(Object(re.a)({type:ze},_.d,_.c)),e})}}function St(e,t){var a;return t(function(e,t,a){return{type:Ve,alertMessage:e,actionLinkText:t,actionFormInitData:a}}(e.message)),a={type:Fe},Object(re.a)(a,_.d,_.c),Object(re.a)(a,"message",e.message),a}var Rt=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(N.a)(this,Object(O.a)(t).call(this,e))).handleRaceSelected=function(e){var t,n,r=Number(e.target.value),c=(t=a.props.plannedRaces,n=r,t.filter(function(e){return e.id===n})[0]);a.setState({targetRace:c}),c&&a.props.trainingPlanGeneratorActions.loadTrainingPlanGeneratorInputs(c.distance,c.planned_date)},a.handleGeneratePlanClick=function(e){var t=JSON.stringify({target_race_distance:a.state.targetRace.distance,target_race_date:a.state.targetRace.planned_date,long_run_planning_period:e.long_run_planning_period,long_run_day:e.long_run_day,other_runs_per_week:e.other_runs_per_week,other_runs_planning_period:e.other_runs_planning_period,other_run_days:e.other_run_days,other_run_types:e.other_run_types});a.props.trainingPlanGeneratorActions.addPlannedActivities(t).then(function(e){a.props.refresh(a.props.selectedDate)}),a.props.close()},a.renderTargetRaceOption=function(e){return m.a.createElement("option",{key:e.id,value:e.id},e.name," (",e.planned_date,")")},a.state={targetRace:null},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.props.initialize({long_run_planning_period:"day",long_run_day:"Sun",other_runs_per_week:"0",other_runs_planning_period:"day"})}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.trainingPlanGeneratorInputs,n=this.props.plannedRaces.map(this.renderTargetRaceOption);return m.a.createElement("div",{className:"modal-back-drop"},m.a.createElement("div",{className:"modal-wrapper"},m.a.createElement("div",{className:"generic-modal-header"},m.a.createElement("div",{className:"d-inline"},m.a.createElement("h4",null,"Generate Training Plan")),m.a.createElement("span",{className:"close-modal-btn",onClick:this.props.close},m.a.createElement("i",{className:"fa fa-window-close"}))),m.a.createElement("div",{className:"generic-modal-body"},m.a.createElement("form",{onSubmit:this.props.handleSubmit(this.handleGeneratePlanClick),className:"form"},m.a.createElement("div",{className:"form-group "},m.a.createElement("label",{className:"form-control-label",htmlFor:"target_race_id"},"Choose your target race"),m.a.createElement(J.a,{component:"select",className:"form-control",id:"target_race_id",name:"target_race_id",onChange:this.handleRaceSelected},m.a.createElement("option",{value:"0"},"(Please select a race)"),n)),0===n.length&&m.a.createElement("p",null,"To use the Training Plan Generator you will first need to add a race to your calendar. Close this dialog and then click into the calendar on the date of your target race to add the event. Make sure you specify the distance, and you'll then be able to select it as an option above."),this.state.targetRace&&a&&m.a.createElement(m.a.Fragment,null,m.a.createElement("h5",null,"How we'll generate your plan"),m.a.createElement("p",null,"Your selected race is ",m.a.createElement("span",{className:"font-weight-bold"},this.state.targetRace.distance_formatted)," long. Let's come up with a training plan for the remaining ",m.a.createElement("span",{className:"font-weight-bold"},a.weeks_to_target_race)," weeks until the race, given your activity from the last 4 weeks where you've averaged ",a.last_4_weeks.runs_per_week," runs per week with a longest run of ",a.last_4_weeks.longest_distance_formatted,"."),a&&a.total_runs_above_target_distance>1&&m.a.createElement(m.a.Fragment,null,m.a.createElement("p",null,"You've done the distance for this race ",a.total_runs_above_target_distance," times before. We'll look at the training you did before the ",a.current_pb.activity_name," on ",a.current_pb.activity_date," where you averaged ",a.current_pb.average_pace_formatted," and factor that into your suggested training plan. The longest run you did leading up to that event was ",a.pre_pb_long_runs.longest_distance_formatted,"."))),this.state.targetRace&&m.a.createElement("h5",null,"Plan your long runs"),this.state.targetRace&&t&&t.has_flexible_planning_enabled&&m.a.createElement("div",{className:"form-group "},m.a.createElement("label",{className:"form-control-label",htmlFor:"long_run_planning_period"},"Would you like to choose a day for your long runs?"),m.a.createElement(J.a,{component:"select",className:"form-control",id:"long_run_planning_period",name:"long_run_planning_period"},m.a.createElement("option",{value:"day"},"Yes, let me choose a specific day for my long runs"),m.a.createElement("option",{value:"week"},"No, I'll be flexible about what day during the week to do my long runs"))),this.state.targetRace&&(!(t&&t.has_flexible_planning_enabled)||"day"===this.props.longRunPlanningPeriodValue)&&m.a.createElement("div",{className:"form-group "},m.a.createElement("label",{className:"form-control-label",htmlFor:"long_run_day"},"Choose a day for your long run"),m.a.createElement(J.a,{component:"select",className:"form-control",id:"long_run_day",name:"long_run_day"},m.a.createElement("option",{value:"Mon"},"Monday"),m.a.createElement("option",{value:"Tue"},"Tuesday"),m.a.createElement("option",{value:"Wed"},"Wednesday"),m.a.createElement("option",{value:"Thu"},"Thursday"),m.a.createElement("option",{value:"Fri"},"Friday"),m.a.createElement("option",{value:"Sat"},"Saturday"),m.a.createElement("option",{value:"Sun"},"Sunday"))),this.state.targetRace&&m.a.createElement("h5",null,"Plan your other runs"),this.state.targetRace&&m.a.createElement("div",{className:"form-group "},m.a.createElement("label",{className:"form-control-label",htmlFor:"other_runs_per_week"},"How many other runs would you like to include each week (excluding your long run)?"),m.a.createElement(J.a,{component:"select",className:"form-control",id:"other_runs_per_week",name:"other_runs_per_week"},m.a.createElement("option",{value:"0"},"None, I'll stick to just the long run"),m.a.createElement("option",{value:"1"},"1 more run per week"),m.a.createElement("option",{value:"2"},"2 more runs per week"),m.a.createElement("option",{value:"3"},"3 more runs per week"),m.a.createElement("option",{value:"4"},"4 more runs per week"),m.a.createElement("option",{value:"5"},"5 more runs per week"))),this.state.targetRace&&"0"!==this.props.otherRunsPerWeekValue&&t&&t.has_flexible_planning_enabled&&m.a.createElement("div",{className:"form-group "},m.a.createElement("label",{className:"form-control-label",htmlFor:"other_runs_planning_period"},"Would you like your remaining runs to be planned for specific days?"),m.a.createElement(J.a,{component:"select",className:"form-control",id:"other_runs_planning_period",name:"other_runs_planning_period"},m.a.createElement("option",{value:"day"},"Yes, generate runs for specific days of the week"),m.a.createElement("option",{value:"week"},"No, I'll be flexible about what days during the week to do my remaining runs"))),this.state.targetRace&&"0"!==this.props.otherRunsPerWeekValue&&(!(t&&t.has_flexible_planning_enabled)||"day"===this.props.otherRunsPlanningPeriodValue)&&m.a.createElement(m.a.Fragment,null,m.a.createElement("p",null,"What other days of the week are you able to run on?"),m.a.createElement("div",{className:"form-group row"},[{name:"Monday",value:"day1"},{name:"Tuesday",value:"day2"},{name:"Wednesday",value:"day3"},{name:"Thursday",value:"day4"},{name:"Friday",value:"day5"},{name:"Saturday",value:"day6"},{name:"Sunday",value:"day7"}].map(function(e){return m.a.createElement("div",{key:e.value,className:"col-4"},m.a.createElement(J.a,{component:"input",type:"checkbox",name:"other_run_days.".concat(e.value)}),"\xa0",m.a.createElement("label",{className:"form-control-label",htmlFor:"other_run_days.".concat(e.value)},e.name))}))),this.state.targetRace&&this.props.otherRunsPerWeekValue>"1"&&m.a.createElement(m.a.Fragment,null,m.a.createElement("p",null,"What types of run would you like to do aside from your long run and easy runs?"),m.a.createElement("div",{className:"form-group row"},[{name:"Intervals / Fartlek",value:"intervals"},{name:"Tempo",value:"tempo"},{name:"Hills",value:"hills"}].map(function(e){return m.a.createElement("div",{key:e.value,className:"col-4"},m.a.createElement(J.a,{component:"input",type:"checkbox",name:"other_run_types.".concat(e.value)}),"\xa0",m.a.createElement("label",{className:"form-control-label",htmlFor:"other_run_types.".concat(e.value)},e.name))}))),m.a.createElement("button",{type:"submit",className:"btn btn-primary mr-1"},"Generate Plan"),m.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.props.close},"Cancel")))))}}]),t}(u.Component);Rt=Object(X.a)({form:"trainingPlanGenerator"})(Rt);var xt=Object($.a)("trainingPlanGenerator");Rt=Object(y.b)(function(e){return{longRunPlanningPeriodValue:xt(e,"long_run_planning_period"),otherRunsPerWeekValue:xt(e,"other_runs_per_week"),otherRunsPlanningPeriodValue:xt(e,"other_runs_planning_period")}})(Rt);var Mt=Object(y.b)(function(e){return{user:e.user,plannedRaces:e.plannedRaces,trainingPlanGeneratorInputs:e.trainingPlanGeneratorInputs}},function(e){return{trainingPlanGeneratorActions:Object(f.b)(i,e)}})(Rt),It=function e(){var t=this;Object(b.a)(this,e),this.getTrainingPlanTemplates=function(){var e=t.endpointOrigin+"/api/training_plan_templates";return fetch(e,{method:"GET"}).then(function(e){if(e.ok)return e.json()}).catch(function(e){throw e})},this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin};function Ft(){return function(e){return e(Object(re.a)({type:ve},_.d,_.b)),(new It).getTrainingPlanTemplates().then(function(t){t&&e(Yt(t))}).catch(function(t){throw e(Object(re.a)({type:ze},_.d,_.c)),t})}}function Yt(e){var t;return t={type:Ye},Object(re.a)(t,_.d,_.c),Object(re.a)(t,"trainingPlanTemplates",e.training_plan_templates),t}function Lt(e){var t=JSON.stringify({template_id:e});return function(e){return e(Object(re.a)({type:Le},_.d,_.b)),(new it).postPlannedExercises(t).then(function(t){e(Gt(t))}).catch(function(t){throw e(Object(re.a)({type:ze},_.d,_.c)),t})}}function Gt(e){var t;return t={type:Ge},Object(re.a)(t,_.d,_.c),Object(re.a)(t,"message",e.message),t}var Ut=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).handleAddToTrainingPlan=function(e){a.props.trainingPlanTemplateActions.copyTrainingPlanTemplate(e).then(function(e){a.props.refresh(a.props.calendarDay),a.props.activityTypeActions.loadActivityTypes()})},a.renderTemplateDetails=function(e){return m.a.createElement("div",{key:e.id},m.a.createElement("hr",null),m.a.createElement("div",{className:"alert alert-info"},m.a.createElement("h6",null,e.name," [",m.a.createElement("a",{href:"#add",onClick:function(){return a.handleAddToTrainingPlan(e.id)}},"Add to Training Plan"),"]"),m.a.createElement("p",null,e.description," ",m.a.createElement("a",{href:e.link_url,target:"_blank",rel:"noopener noreferrer"},e.link_text))))},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.props.trainingPlanTemplateActions.loadTrainingPlanTemplates()}},{key:"render",value:function(){var e=this.props.trainingPlanTemplates.map(this.renderTemplateDetails);return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"card mt-4"},m.a.createElement("div",{className:"card-header"},m.a.createElement("h4",null,"Try out the new Training Plan Generator for runners")),m.a.createElement("div",{className:"card-body"},m.a.createElement("p",null,"You can now generate a customised training plan for your running races. This is a very early release of a tool we'll be refining to suit more athletes and types of events, and it will work best for people training for events of around half marathon distance. Let us know how you get on with it and if there's anything in particular you'd like to see improved via ",m.a.createElement("a",{href:"mailto:feedback@trainingticks.com"},"feedback@trainingticks.com"),"."),m.a.createElement("p",null,"Start by adding your planned race to the calendar above if you haven't already, ensuring that you specify the distance of the event. Then you'll be able to ",m.a.createElement("a",{href:"#tpg",onClick:this.props.onGenerateTrainingPlan,className:"font-weight-bold"},"Generate a Training Plan")," taking you up to the week of the race."))),m.a.createElement("div",{className:"card mt-4"},m.a.createElement("div",{className:"card-header"},m.a.createElement("h4",null,"Get started using a template")),m.a.createElement("div",{className:"card-body"},m.a.createElement("p",null,"If you're looking for somewhere to start with creating your personalised training plan, try one of these templates to populate some initial exercises, and then adapt as required. Let us know via ",m.a.createElement("a",{href:"mailto:feedback@trainingticks.com"},"feedback@trainingticks.com")," if there's a training plan you've come across that you'd like to be available as a template."),m.a.createElement("p",null,m.a.createElement("i",null,"Please note that Training Ticks has no association with any of the websites or authors referenced below. We are sharing them as useful resources that will hopefully help your training.")),e)))}}]),t}(u.Component);var Bt=Ut=Object(y.b)(function(e){return{trainingPlanTemplates:e.trainingPlanTemplates}},function(e){return{trainingPlanTemplateActions:Object(f.b)(o,e),activityTypeActions:Object(f.b)(l,e)}})(Ut),Wt=function e(){var t=this;Object(b.a)(this,e),this.getCompletedActivities=function(e,a){var n={method:"GET",headers:{Authorization:t.authHeader}},r=t.endpointOrigin+"/api/completed_activities?startDate="+P.a.format(e,t.dateFormat)+"&endDate="+P.a.format(a,t.dateFormat);return fetch(r,n).then(function(e){if(e.ok)return e.json()}).catch(function(e){throw e})};var a=Xe.a.get("accessToken");this.authHeader="Bearer "+a,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin,this.dateFormat="YYYY-MM-DD"};function Ht(e,t){return function(a){return a(Object(re.a)({type:ke},_.d,_.b)),(new Wt).getCompletedActivities(e,t).then(function(e){e&&(a(Vt(e)),a(function(e){return{type:Te,completedExercises:e.completed_exercises}}(e)))}).catch(function(e){throw a(Object(re.a)({type:ze},_.d,_.c)),e})}}function Vt(e){var t;return t={type:De},Object(re.a)(t,_.d,_.c),Object(re.a)(t,"completedActivities",e.completed_activities),t}var zt=a(172),Jt=a.n(zt),Xt=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(N.a)(this,Object(O.a)(t).call(this,e))).refreshPlannedActivities=function(e){var t=P.a.startOfWeek(P.a.startOfMonth(e),{weekStartsOn:1}),n=P.a.endOfWeek(P.a.endOfMonth(e),{weekStartsOn:1});a.props.plannedActivityActions.loadPlannedActivities(t,n)},a.refreshCompletedActivities=function(e){var t=P.a.startOfWeek(P.a.startOfMonth(e),{weekStartsOn:1}),n=P.a.endOfWeek(P.a.endOfMonth(e),{weekStartsOn:1});a.props.completedActivityActions.loadCompletedActivities(t,n)},a.refreshAllActivities=function(e){a.refreshPlannedActivities(e),a.refreshCompletedActivities(e)},a.renderHeader=function(){return m.a.createElement("div",{className:"header row flex-middle"},m.a.createElement("div",{className:"col col-start"},m.a.createElement("div",{className:"icon",onClick:a.prevMonth},"chevron_left")),m.a.createElement("div",{className:"col col-center"},m.a.createElement("span",null,P.a.format(a.state.currentMonth,"MMMM YYYY"))),m.a.createElement("div",{className:"col col-end",onClick:a.nextMonth},m.a.createElement("div",{className:"icon"},"chevron_right")))},a.renderDayNames=function(){for(var e=[],t=P.a.startOfWeek(a.state.currentMonth,{weekStartsOn:1}),n=0;n<7;n++)e.push(m.a.createElement("div",{className:"col col-center",key:n},m.a.createElement("div",{className:"d-none d-md-block"},P.a.format(P.a.addDays(t,n),"dddd")),m.a.createElement("div",{className:"d-block d-md-none"},P.a.format(P.a.addDays(t,n),"ddd"))));return m.a.createElement("div",{className:"days row"},e)},a.renderPlannedActivityBadge=function(e){var t="badge badge-primary "+e.category_key;return m.a.createElement("div",{key:e.id,className:"d-inline"},m.a.createElement("div",{className:"d-none d-md-inline"},m.a.createElement("span",{className:t},e.activity_subtype)),m.a.createElement("div",{className:"d-inline d-md-none "},m.a.createElement("span",{className:t},e.activity_subtype[0])))},a.renderPlannedRaceBadge=function(e){var t="badge badge-primary "+e.category_key;return m.a.createElement("div",{key:e.id,className:"d-inline"},m.a.createElement("div",{className:"d-inline"},m.a.createElement("span",{className:t},e.name)))},a.renderPlannedExerciseCategoryBadge=function(e){var t="badge badge-primary "+e.category_key;return m.a.createElement("div",{key:e.category_key+e.planned_date,className:"d-inline"},m.a.createElement("div",{className:"d-none d-md-inline"},m.a.createElement("span",{className:t},e.category_name)),m.a.createElement("div",{className:"d-inline d-md-none"},m.a.createElement("span",{className:t},e.category_name[0])))},a.renderCompletedActivityBadge=function(e){var t="badge badge-primary "+e.category_key;return m.a.createElement("div",{key:e.id,className:"d-inline"},m.a.createElement("div",{className:"d-inline"},m.a.createElement("span",{className:t},m.a.createElement("div",{className:"d-none d-md-inline"},m.a.createElement("i",{className:"fa fa-check"}))," ",e.name)))},a.renderCompletedExerciseCategoryBadge=function(e){var t="badge badge-primary "+e.category_key;return m.a.createElement("div",{key:e.category_key+e.exercise_date,className:"d-inline"},m.a.createElement("div",{className:"d-inline"},m.a.createElement("span",{className:t},m.a.createElement("div",{className:"d-none d-md-inline"},m.a.createElement("i",{className:"fa fa-check"}))," ",e.category_name)))},a.renderCells=function(){for(var e=a.state,t=e.currentMonth,n=e.selectedDate,r=e.selectedWeek,c=e.today,l=P.a.startOfMonth(t),i=P.a.endOfMonth(l),o=P.a.startOfWeek(l,{weekStartsOn:1}),s=P.a.endOfWeek(i,{weekStartsOn:1}),d=[],u=[],p=o,h="",f=function(){for(var e=p,t=function(e){h=P.a.format(p,"D");var t=p,r=C(a.props.plannedActivities,p,"day"),i=r.map(a.renderPlannedActivityBadge),o=S(a.props.plannedRaces,p),s=o.map(a.renderPlannedRaceBadge),d=R(a.props.plannedExercises,p,"day").map(a.renderPlannedExerciseCategoryBadge),f=x(a.props.completedActivities,p),y=f.map(a.renderCompletedActivityBadge),E={},v=!1;if(o.length>0)v=!0;else{var _=!0,b=!1,g=void 0;try{for(var N,O=f[Symbol.iterator]();!(_=(N=O.next()).done);_=!0){!0===N.value.is_race&&(v=!0)}}catch(A){b=!0,g=A}finally{try{_||null==O.return||O.return()}finally{if(b)throw g}}}v&&(E={backgroundImage:"url(".concat(Jt.a,")"),backgroundSize:"cover"});var w=M(a.props.completedExercises,p).map(a.renderCompletedExerciseCategoryBadge);u.push(m.a.createElement("div",{className:"col cell\n                            ".concat(P.a.isSameMonth(p,l)?"":"disabled","\n                            ").concat(P.a.isSameDay(p,n)?"selected":"","\n                            ").concat(P.a.isBefore(p,c)?"past":"","\n                        "),style:E,key:p,onClick:function(){return a.onDateClick(P.a.parse(t),r)}},m.a.createElement("span",{className:"number"},h),m.a.createElement("span",{className:"bg"},h),m.a.createElement("div",{className:"cell-content"},m.a.createElement("div",null,y),m.a.createElement("div",null,w),m.a.createElement("div",null,i),m.a.createElement("div",null,s),m.a.createElement("div",null,d)))),p=P.a.addDays(p,1)},i=0;i<7;i++)t();if(a.props.user&&a.props.user.has_flexible_planning_enabled&&P.a.isAfter(p,c)){var o=C(a.props.plannedActivities,e,"week").map(a.renderPlannedActivityBadge),s=R(a.props.plannedExercises,e,"week").map(a.renderPlannedExerciseCategoryBadge);d.push(m.a.createElement("div",{key:"wc-"+e,className:"row"},m.a.createElement("div",{className:"week-todos"},m.a.createElement("div",{className:"col cell\n                            ".concat(P.a.isSameDay(e,r)?"selected":""),onClick:function(){return a.onWeekClick(P.a.parse(e))}},m.a.createElement("div",{className:"cell-content"},"Week of "+P.a.format(e,"D MMMM")," (to do any day):\xa0",o,s)))))}d.push(m.a.createElement("div",{className:"row",key:p},u)),u=[]};p<=s;)f();return m.a.createElement("div",{className:"body"},d)},a.onDateClick=function(e,t){a.setState({selectedDate:e,selectedWeek:null,showCalendarDayModal:!0,showCalendarWeekModal:!1,showTrainingPlanGeneratorModal:!1,selectedDatePlannedActivities:t}),document.body.classList.toggle("noscroll")},a.onWeekClick=function(e){a.setState({selectedDate:null,selectedWeek:e,showCalendarDayModal:!1,showCalendarWeekModal:!0,showTrainingPlanGeneratorModal:!1}),document.body.classList.toggle("noscroll")},a.handleTrainingPlanGeneratorOpen=function(e){a.setState({showCalendarDayModal:!1,showCalendarWeekModal:!1,showTrainingPlanGeneratorModal:!0}),document.body.classList.toggle("noscroll")},a.handleCloseModal=function(){a.setState({showCalendarDayModal:!1,showCalendarWeekModal:!1,showTrainingPlanGeneratorModal:!1}),document.body.classList.toggle("noscroll"),a.refreshPlannedActivities(a.state.currentMonth)},a.nextMonth=function(){var e=P.a.addMonths(a.state.currentMonth,1);a.setState({currentMonth:e}),a.refreshAllActivities(e)},a.prevMonth=function(){var e=P.a.subMonths(a.state.currentMonth,1);a.setState({currentMonth:e}),a.refreshAllActivities(e)},a.state={currentMonth:new Date,today:new Date,selectedDate:new Date,selectedWeek:null,showCalendarDayModal:!1,showCalendarWeekModal:!1,showTrainingPlanGeneratorModal:!1},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.refreshAllActivities(this.state.currentMonth)}},{key:"render",value:function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"calendar"},this.renderHeader(),this.renderDayNames(),this.renderCells()),this.state.showCalendarDayModal&&m.a.createElement(kt,{className:"modal",selectionType:"day",calendarDay:this.state.selectedDate,refresh:this.refreshPlannedActivities,close:this.handleCloseModal}),this.state.showCalendarWeekModal&&m.a.createElement(kt,{className:"modal",selectionType:"week",calendarDay:this.state.selectedWeek,refresh:this.refreshPlannedActivities,close:this.handleCloseModal}),this.state.showTrainingPlanGeneratorModal&&m.a.createElement(Mt,{className:"modal",refresh:this.refreshPlannedActivities,selectedDate:this.state.selectedDate,close:this.handleCloseModal}),m.a.createElement(Bt,{calendarDay:this.state.selectedDate,onGenerateTrainingPlan:this.handleTrainingPlanGeneratorOpen,refresh:this.refreshPlannedActivities}))}}]),t}(u.Component);var qt=Xt=Object(y.b)(function(e){return{user:e.user,plannedActivities:e.plannedActivities,plannedRaces:e.plannedRaces,plannedExercises:e.plannedExercises,completedActivities:e.completedActivities,completedExercises:e.completedExercises}},function(e){return{plannedActivityActions:Object(f.b)(c,e),completedActivityActions:Object(f.b)(s,e)}})(Xt),Kt=function(e){function t(){return Object(b.a)(this,t),Object(N.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.alert;return m.a.createElement(m.a.Fragment,null,t&&t.showAlert&&m.a.createElement("div",{className:"alert alert-info"},t.message,"\xa0",t.actionLinkText&&m.a.createElement(m.a.Fragment,null,"(",m.a.createElement("a",{href:"#action",onClick:function(){return e.props.onActionLinkClick(t.actionFormInitData)}},t.actionLinkText),")")))}}]),t}(u.Component);var Qt=Kt=Object(y.b)(function(e){return{alert:e.alert}})(Kt),Zt=function e(){var t=this;Object(b.a)(this,e),this.getUserInfo=function(){var e={method:"GET",headers:{Authorization:t.authHeader}},a=t.endpointOrigin+"/api/user_info";return fetch(a,e).then(function(e){if(e.ok)return e.json()}).catch(function(e){return e})},this.patchUserInfo=function(e){var a={method:"PATCH",headers:{Authorization:t.authHeader,"Content-Type":"application/json"},body:e,mode:"cors"},n=t.endpointOrigin+"/api/user_info";return fetch(n,a).then(function(e){if(e.ok)return e.json()}).catch(function(e){throw e})};var a=Xe.a.get("accessToken");this.authHeader="Bearer "+a,this.endpointOrigin="http://localhost:3000"===window.location.origin?"http://localhost:5000":window.location.origin};function $t(){return function(e){return e(Object(re.a)({type:Ue},_.d,_.b)),(new Zt).getUserInfo().then(function(t){t&&e(ea(t))}).catch(function(t){throw e(Object(re.a)({type:ze},_.d,_.c)),t})}}function ea(e){var t;return t={type:Be},Object(re.a)(t,_.d,_.c),Object(re.a)(t,"userInfo",e.user_info),t}function ta(e,t){return function(a){return a(Object(re.a)({type:We},_.d,_.b)),(new Zt).patchUserInfo(e,t).then(function(t){t&&a(aa(e,t))}).catch(function(e){throw a(Object(re.a)({type:ze},_.d,_.c)),e})}}function aa(e,t){var a;return a={type:He},Object(re.a)(a,_.d,_.c),Object(re.a)(a,"updatedId",e),Object(re.a)(a,"updatedUserInfo",t.updated_user_info),a}var na=function(e){function t(){return Object(b.a)(this,t),Object(N.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.props.userActions.loadUserInfo(),this.props.activityTypeActions.loadActivityTypes()}},{key:"render",value:function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement(_.a,null),m.a.createElement(Qt,null),m.a.createElement("h2",null,"Training Plan"),m.a.createElement(qt,null))}}]),t}(u.Component);var ra=na=Object(y.b)(function(e){return{}},function(e){return{activityTypeActions:Object(f.b)(l,e),userActions:Object(f.b)(d,e)}})(na);a(400);var ca=Object(f.c)({form:v.a,plannedActivities:function(e,t){if(void 0===e)return[];switch(t.type){case le:return t.plannedActivities;default:return e}},plannedRaces:function(e,t){if(void 0===e)return[];switch(t.type){case pe:return t.plannedRaces;default:return e}},plannedExercises:function(e,t){if(void 0===e)return[];switch(t.type){case be:return t.plannedExercises;default:return e}},completedActivities:function(e,t){if(void 0===e)return[];switch(t.type){case De:return t.completedActivities;default:return e}},completedExercises:function(e,t){if(void 0===e)return[];switch(t.type){case Te:return t.completedExercises;default:return e}},activityTypes:function(e,t){if(void 0===e)return[];switch(t.type){case Ce:return t.activityTypes;default:return e}},exerciseTypes:function(e,t){if(void 0===e)return[];switch(t.type){case Se:return t.exerciseTypes;default:return e}},exerciseCategories:function(e,t){if(void 0===e)return[];switch(t.type){case Re:return t.exerciseCategories;default:return e}},trainingPlanGeneratorInputs:function(e,t){if(void 0===e)return null;switch(t.type){case Me:return t.trainingPlanGeneratorInputs;default:return e}},trainingPlanTemplates:function(e,t){if(void 0===e)return[];switch(t.type){case Ye:return t.trainingPlanTemplates;default:return e}},user:function(e,t){if(void 0===e)return null;switch(t.type){case Be:return t.userInfo;case He:return t.updatedUserInfo;default:return e}},pendingTasks:_.e,alert:function(e,t){if(void 0===e)return{showAlert:!1,message:null};switch(t.type){case Ve:return{showAlert:!0,message:t.alertMessage,actionLinkText:t.actionLinkText,actionFormInitData:t.actionFormInitData};default:return e}}}),la=Object(f.d)(ca,Object(f.a)(E.a));h.a.render(m.a.createElement(y.a,{store:la},m.a.createElement(ra,null)),document.getElementById("container"))}},[[173,1,2]]]);
//# sourceMappingURL=main.2cfafe31.chunk.js.map